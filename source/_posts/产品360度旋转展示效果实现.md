---
title: 产品360度旋转展示效果实现
date: 2023-02-28 21:08:59
tags: 产品360度旋转展示效果实现
categories: 
---

![image.png](https://pic4.58cdn.com.cn/nowater/webim/big/n_v271fc8841723342a59e3872f46f46d0fa.png)

https://www.dongchedi.com/auto/series/4499

图片素材

![image.png](https://pic7.58cdn.com.cn/nowater/webim/big/n_v2a0cf6dee153940d69e6d3b6544a27977.png)

```html
<div id="box">
  <img src="img/1.png" alt="">
  <div class="btn">
    <a href="javascript:;" class="prev"><</a>
    <a href="javascript:;" class="next">></a>
  </div>
</div>  
```

![img](https://p3-sign.toutiaoimg.com/tos-cn-i-qvj2lq49k0/53a847f7fb68421da55d55c052594e22~noop.image?_iz=58558&from=article.pc_detail&x-expires=1678194517&x-signature=fuLQHk3%2B3OCIDKxagLF11%2B%2FaDQM%3D)

**原理：就是通过js改变img标签的src地址，附值不同角度的图片**

https://www.dongchedi.com/auto/series/4499 下的效果是通过控制不同角度的图片的opacity实现的



**关于增加性能开启了3D加速：**

动态改变元素的translate3D，自然开启了3D加速。

setTimeout/setInterval/requestAnimationFrame和CSS3没有很大的帧速差别。

**现今主要的不同点是：**

- 功能涵盖面，JS比CSS3大
  定义动画过程的@keyframes不支持递归定义，如果有多种类似的动画过程，需要调节多个参数来生成的话，将会有很大的冗余（比如jQuery Mobile的动画方案），而JS则天然可以以一套函数实现多个不同的动画过程时间尺度上，@keyframes的动画粒度粗，而JS的动画粒度控制可以很细CSS3动画里被支持的时间函数非常少，不够灵活以现有的接口，CSS3动画无法做到支持两个以上的状态转化。
- 实现/重构难度不一，CSS3比JS更简单，性能调优方向固定。
- 对于帧速表现不好的低版本浏览器，CSS3可以做到自然降级，而JS则需要撰写额外代码。
- CSS3有兼容性问题，而JS大多时候没有兼容性问题。



**如何判断鼠标或触摸是向左、向右、向上、向下滑动**

触摸参考：

```js
var startx, starty;
    //获得角度
    function getAngle(angx, angy) {
        return Math.atan2(angy, angx) * 180 / Math.PI;
    };
 
    //根据起点终点返回方向 1向上 2向下 3向左 4向右 0未滑动
    function getDirection(startx, starty, endx, endy) {
        var angx = endx - startx;
        var angy = endy - starty;
        var result = 0;
 
        //如果滑动距离太短
        if (Math.abs(angx) < 2 && Math.abs(angy) < 2) {
            return result;
        }
 
        var angle = getAngle(angx, angy);
        if (angle >= -135 && angle <= -45) {
            result = 1;
        } else if (angle > 45 && angle < 135) {
            result = 2;
        } else if ((angle >= 135 && angle <= 180) || (angle >= -180 && angle < -135)) {
            result = 3;
        } else if (angle >= -45 && angle <= 45) {
            result = 4;
        }
 
        return result;
    }
    //手指接触屏幕
    document.addEventListener("touchstart", function(e) {
        startx = e.touches[0].pageX;
        starty = e.touches[0].pageY;
    }, false);
    //手指离开屏幕
    document.addEventListener("touchend", function(e) {
        var endx, endy;
        endx = e.changedTouches[0].pageX;
        endy = e.changedTouches[0].pageY;
        var direction = getDirection(startx, starty, endx, endy);
        switch (direction) {
            case 0:
                alert("未滑动！");
                break;
            case 1:
                alert("向上！")
                break;
            case 2:
                alert("向下！")
                break;
            case 3:
                alert("向左！")
                break;
            case 4:
                alert("向右！")
                break;
            default:
        }
    }, false);
```

鼠标模式

```js
$(function () {
        var div=document.getElementById("元素id");
        div.onmousedown=function(e){
          //按下
               document.onmousemove=function(e){
                   
                //移动
                 
               };
               document.onmouseup=function(){
                   document.onmouseup=null;
                   document.onmousemove=null;
                  //松开
               };
         };
    });
```

