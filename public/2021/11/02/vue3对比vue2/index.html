<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/hb-myblog.github.io/images/favicon-more.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/hb-myblog.github.io/images/favicon.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/hb-myblog.github.io/images/favicon.png">
  <link rel="mask-icon" href="/hb-myblog.github.io/images/favicon-more.png" color="#222">

<link rel="stylesheet" href="/hb-myblog.github.io/css/main.css">

<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">
<link rel="stylesheet" href="/hb-myblog.github.io/lib/font-awesome/css/all.min.css">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"binstar-hb.github.io","root":"/hb-myblog.github.io/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"b2t":true,"scrollpercent":true,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":true,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="使用vue-cli4.0创建项目先把脚手架升级到最新版本，之前没有安装的话，直接全局安装就是最新版4.0 安装vue-cli npm install -g @vue&#x2F;cli 更新vue-cli npm update -g @vue&#x2F;cli 创建项目：">
<meta property="og:type" content="article">
<meta property="og:title" content="vue3对比vue2">
<meta property="og:url" content="https://binstar-hb.github.io/hb-myblog.github.io/2021/11/02/vue3%E5%AF%B9%E6%AF%94vue2/index.html">
<meta property="og:site_name" content="Where there is a will, there is a way!">
<meta property="og:description" content="使用vue-cli4.0创建项目先把脚手架升级到最新版本，之前没有安装的话，直接全局安装就是最新版4.0 安装vue-cli npm install -g @vue&#x2F;cli 更新vue-cli npm update -g @vue&#x2F;cli 创建项目：">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2021-11-02T08:55:26.000Z">
<meta property="article:modified_time" content="2022-01-13T13:05:55.956Z">
<meta property="article:author" content="Binstar">
<meta property="article:tag" content="vue3对比vue2">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://binstar-hb.github.io/hb-myblog.github.io/2021/11/02/vue3%E5%AF%B9%E6%AF%94vue2/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>vue3对比vue2 | Where there is a will, there is a way!</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/hb-myblog.github.io/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Where there is a will, there is a way!</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">Everyday is stronger than yesterday, one day in the future, you don't have to be on the shoulders of giants, because you are giant!</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/hb-myblog.github.io/" rel="section"><i class="home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/hb-myblog.github.io/about/" rel="section"><i class="user fa-fw"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/hb-myblog.github.io/tags/" rel="section"><i class="tags fa-fw"></i>标签<span class="badge">10</span></a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/hb-myblog.github.io/categories/" rel="section"><i class="th fa-fw"></i>分类<span class="badge">5</span></a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/hb-myblog.github.io/archives/" rel="section"><i class="archive fa-fw"></i>归档<span class="badge">13</span></a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://binstar-hb.github.io/hb-myblog.github.io/2021/11/02/vue3%E5%AF%B9%E6%AF%94vue2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/hb-myblog.github.io/images/head.png">
      <meta itemprop="name" content="Binstar">
      <meta itemprop="description" content="I'm a ghost, I'll eat you.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Where there is a will, there is a way!">
    </span>
      <header class="post-header">
        <h1 class="post-title
        " itemprop="name headline">
          vue3对比vue2
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-11-02 16:55:26" itemprop="dateCreated datePublished" datetime="2021-11-02T16:55:26+08:00">2021-11-02</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-01-13 21:05:55" itemprop="dateModified" datetime="2022-01-13T21:05:55+08:00">2022-01-13</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/hb-myblog.github.io/categories/vue/" itemprop="url" rel="index"><span itemprop="name">vue</span></a>
                </span>
            </span>

          
            <span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv" style="display: none;">
              <span class="post-meta-item-icon">
                <i class="eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span id="busuanzi_value_page_pv"></span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h5 id="使用vue-cli4-0创建项目"><a href="#使用vue-cli4-0创建项目" class="headerlink" title="使用vue-cli4.0创建项目"></a>使用vue-cli4.0创建项目</h5><p>先把脚手架升级到最新版本，之前没有安装的话，直接全局安装就是最新版4.0</p>
<p><strong>安装</strong>vue-cli npm install -g @vue/cli</p>
<p><strong>更新</strong>vue-cli npm update -g @vue/cli</p>
<p><strong>创建项目：</strong></p>
<p>vue create vue3-demo</p>
<p>cd vue3-demo</p>
<p>yarn serve</p>
<p><strong>升级vue2项目</strong></p>
<p>yarn add vue-next</p>
<h5 id="创建vue3项目-vite方式"><a href="#创建vue3项目-vite方式" class="headerlink" title="创建vue3项目-vite方式"></a>创建vue3项目-vite方式</h5><p>npm init vite-app <project-name></project-name></p>
<p>cd <project-name></project-name></p>
<p>yarn</p>
<p>yarn dev</p>
<p><strong>vite</strong>是一个基于vue3单文件组件的非打包开发服务器，它做到了本地快速开发启动</p>
<ul>
<li>快速的冷启动，不需要等待打包操作</li>
<li>即时的热模块更新，替换性能和模块数量的解耦让更新飞起</li>
<li>真正的按需编译，不再等待整个应用编译完成，这是一个巨大的改变</li>
</ul>
<h5 id="生命周期的变化"><a href="#生命周期的变化" class="headerlink" title="生命周期的变化"></a>生命周期的变化</h5><table>
<thead>
<tr>
<th>vue2.x</th>
<th>vue3.x</th>
</tr>
</thead>
<tbody><tr>
<td>beforeCreate</td>
<td>移除(setup)</td>
</tr>
<tr>
<td>created</td>
<td>移除(setup)</td>
</tr>
<tr>
<td>beforeMount</td>
<td>onBeforeMount</td>
</tr>
<tr>
<td>mounted</td>
<td>onMounted</td>
</tr>
<tr>
<td>beforeUpdate</td>
<td>onBeforeUpdate</td>
</tr>
<tr>
<td>updated</td>
<td>onUpdated</td>
</tr>
<tr>
<td>beforeUnmounte</td>
<td>onBeforeUnmounte</td>
</tr>
<tr>
<td>unmounted</td>
<td>onUnmounted</td>
</tr>
<tr>
<td>errorCaptured</td>
<td>onErrorCaptured</td>
</tr>
<tr>
<td>renderTracked</td>
<td>onRenderTracked</td>
</tr>
<tr>
<td>renderTriggered</td>
<td>onRenderTriggered</td>
</tr>
</tbody></table>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">impor &#123; onMounted &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">	<span class="function"><span class="title">setup</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">		onMounted(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">			<span class="built_in">console</span>.log(<span class="string">&#x27;component is mounted&#x27;</span>)</span><br><span class="line">		&#125;)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="main-js中变化-新增全局API-createApp"><a href="#main-js中变化-新增全局API-createApp" class="headerlink" title="main.js中变化 新增全局API: createApp()"></a>main.js中变化 新增全局API: createApp()</h5><p>vue2.x中采用的是new Vue()，vue3.x中使用如下方式创建应用实例</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> app = createApp(&#123;&#125;);</span><br></pre></td></tr></table></figure>

<h5 id="router-js"><a href="#router-js" class="headerlink" title="router.js"></a>router.js</h5><p>vue3.x需要引入createRouter创建地址路由。createWebHashHistory对应之前的hash,createWebHistory对应之前的history。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createRouter, createWebHashHistory &#125; <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> routes = [</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="attr">name</span>: <span class="string">&#x27;homepage&#x27;</span>,</span><br><span class="line">		<span class="attr">path</span>: <span class="string">&#x27;/homepage&#x27;</span>,</span><br><span class="line">		<span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../views/homepage/index.vue&#x27;</span>)</span><br><span class="line">	&#125;</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = createRouter(&#123;</span><br><span class="line">	<span class="attr">history</span>: createWebHashHistory(),</span><br><span class="line">	routes</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router;</span><br></pre></td></tr></table></figure>

<h5 id="vuex"><a href="#vuex" class="headerlink" title="vuex"></a>vuex</h5><p>vue3.x中状态管理的创建方式变为了createStore，代码结构更精简合理。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createStore &#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> createStore(&#123;</span><br><span class="line">	<span class="attr">state</span>: &#123;</span><br><span class="line">	</span><br><span class="line">	&#125;,</span><br><span class="line">	<span class="attr">getters</span>: &#123;</span><br><span class="line">	</span><br><span class="line">	&#125;,</span><br><span class="line">	<span class="attr">mutations</span>: &#123;</span><br><span class="line">	</span><br><span class="line">	&#125;,</span><br><span class="line">	<span class="attr">actions</span>: &#123;</span><br><span class="line">	</span><br><span class="line">	&#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h5 id="应用配置"><a href="#应用配置" class="headerlink" title="应用配置"></a>应用配置</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Vue.config					-&gt;	app.config</span><br><span class="line"></span><br><span class="line">Vue.config.ignoredElements	-&gt;	app.config.ignoredElements	</span><br><span class="line"></span><br><span class="line">Vue.component				-&gt;	app.component	</span><br><span class="line"></span><br><span class="line">Vue.directive				-&gt;	app.directive	</span><br><span class="line"></span><br><span class="line">Vue.mixin					-&gt;	app.mixin	</span><br><span class="line"></span><br><span class="line">Vue.use						-&gt;	app.use	</span><br></pre></td></tr></table></figure>

<p>config: 包含Vue应用程序全局配置的对象，在挂载应用之前配置相应的属性。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> app = Vue.createApp(&#123;&#125;);</span><br><span class="line">app.config = &#123;...&#125;</span><br></pre></td></tr></table></figure>

<ol>
<li><p>devtools（类型：Boolean，默认：false），配置是否开启vue-devtools检查，一般在开发环境是true，生产环境为false。<br>app.config.devtools = true</p>
</li>
<li><p>errorHandler（类型：function，参数err：错误内容，vm：对应的实例，info：Vue特定的错误信息，如某个生命周期中出现的错误）<br>app.config.errorHandler = (err, vm, info) =&gt; {}</p>
</li>
<li><p>warnHandler（类型：function，参数msg：警告内容，vm：对应的实例，trace：组件的层次追踪）<br>app.config.warnHandler = (msg, vm, trace) =&gt; {};</p>
</li>
<li><p>globalProperties (类型: any)用于添加到应用程序中任何组件都能使用的全局属性，当与组件内部的属性冲突时，将优先使用组件内部的属性值。可代替Vue2中的Vue .prototype.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Vue2.x</span></span><br><span class="line">Vue.prototype.name = <span class="string">&#x27;zhang_san&#x27;</span></span><br><span class="line"><span class="comment">// Vue3.x</span></span><br><span class="line">app.config.globalProperties.name = <span class="string">&#x27;zhang_san&#x27;</span></span><br><span class="line">app.component(<span class="string">&#x27;child-component&#x27;</span>, &#123;</span><br><span class="line">	<span class="function"><span class="title">mounted</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="built_in">this</span>.name)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li>
<li><p>isCustomElement (类型: (tag: string) =&gt; boolean)，用于来识别Vue之外的自定义元素(如，三方web组件api) ，如果组件或元素符合这个条件，则组件不会被实例化，Vue也不会对组件或元素发出警告信息。<br>app.config.isCustomElement = tag =&gt; tag.startsWith(‘ion’);</p>
</li>
</ol>
<h5 id="挂载应用程序"><a href="#挂载应用程序" class="headerlink" title="挂载应用程序"></a>挂载应用程序</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span>; </span><br><span class="line"><span class="keyword">const</span> app = createApp(App);</span><br><span class="line">app.mount( #app<span class="string">&#x27;); </span></span><br></pre></td></tr></table></figure>

<h5 id="注册全局组件"><a href="#注册全局组件" class="headerlink" title="注册全局组件"></a>注册全局组件</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> app = createApp(&#123;&#125;);</span><br><span class="line"><span class="comment">// myComponent为组件实例</span></span><br><span class="line">app.component(<span class="string">&#x27;my-component, myComponent);</span></span><br><span class="line"><span class="string">//重置组件</span></span><br><span class="line"><span class="string">const MyComponent = app.component(&#x27;</span>my-component<span class="string">&#x27;, &#123;&#125;);</span></span><br></pre></td></tr></table></figure>

<h5 id="新增全局注入-提取：provide-inject-父组件数据注入与子孙组件数据获取"><a href="#新增全局注入-提取：provide-inject-父组件数据注入与子孙组件数据获取" class="headerlink" title="新增全局注入/提取：provide/inject (父组件数据注入与子孙组件数据获取)"></a>新增全局注入/提取：provide/inject (父组件数据注入与子孙组件数据获取)</h5><p>参数: Object | () =&gt; Object.</p>
<p>概述: provide一般与inject一起使用，provide为当前实例的所有子孙组件注入数据，inject在当前实例的子孙组件中获取注入的数据。</p>
<p>用例：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span> ;</span><br><span class="line"><span class="comment">//全局注入数据</span></span><br><span class="line"><span class="keyword">const</span> app = createApp(&#123;</span><br><span class="line">	<span class="attr">procide</span>: &#123;</span><br><span class="line">		<span class="attr">user</span>: <span class="string">&#x27;zhang_san&#x27;</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// 获取数据</span></span><br><span class="line">app.component(‘my-component<span class="string">&#x27;, &#123;</span></span><br><span class="line"><span class="string">	inject: [ &#x27;</span>user<span class="string">&#x27;],</span></span><br><span class="line"><span class="string">	data() &#123;...&#125;</span></span><br><span class="line"><span class="string">&#125;);</span></span><br></pre></td></tr></table></figure>

<h5 id="全局方法"><a href="#全局方法" class="headerlink" title="全局方法"></a>全局方法</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Vue2.x</span></span><br><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>;</span><br><span class="line">Vue.nextTick(<span class="function">()=&gt;</span>&#123; ... &#125;)</span><br><span class="line"><span class="comment">// 或者</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">	...</span><br><span class="line">	<span class="built_in">this</span>.$nextTick(<span class="function">()=&gt;</span>&#123; ... &#125;)</span><br><span class="line">	...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Vue3.x</span></span><br><span class="line"><span class="keyword">import</span> &#123; nextTick &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">	...</span><br><span class="line">	nextTick(<span class="function">()=&gt;</span>&#123; ... &#125;)</span><br><span class="line">	...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="自定义指令：directive"><a href="#自定义指令：directive" class="headerlink" title="自定义指令：directive"></a>自定义指令：directive</h5><p>Vue3.x中对自定义指令的创建提供了更加细致的API（类似于组件的生命周期）</p>
<ol>
<li>bind                            -&gt;    beforeMount（挂载前）</li>
<li>inserted                        -&gt;    mounted（挂载后）</li>
<li>​                                        -&gt;    beforeUpdate（新增，更新前）</li>
<li>update                            -&gt;    删除</li>
<li>componentUpdate        -&gt;    update（更新后）</li>
<li>​                                        -&gt;    beforeUnmounted（新增，卸载前）</li>
<li>unbind                            -&gt;    unmounted（卸载后）</li>
</ol>
<h5 id="跨组件通讯"><a href="#跨组件通讯" class="headerlink" title="跨组件通讯"></a>跨组件通讯</h5><p>vue2.x eventBus</p>
<p>Vue3.x 中全局事件总成将使用mitt来实现跨组件通讯。</p>
<p>使用<strong>mitt</strong>之前先安装mitt模块<strong>npm install –save mitt</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> mitt <span class="keyword">from</span> <span class="string">&#x27;mitt&#x27;</span></span><br><span class="line"><span class="keyword">const</span> VueEvent = mitt()</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> VueEvent;</span><br></pre></td></tr></table></figure>



<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">	<span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">		<span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;doLogin&quot;</span>&gt;</span>父子组件传值<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">	<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span></span><br><span class="line"><span class="javascript"><span class="xml"><span class="keyword">import</span> VueEvent <span class="keyword">from</span> <span class="string">&#x27;../model/event&#x27;</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span></span></span><br><span class="line"><span class="javascript"><span class="xml"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">	<span class="function"><span class="title">data</span>(<span class="params"></span>)</span>&#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">		<span class="keyword">return</span> &#123;&#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">	&#125;,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">	<span class="attr">methods</span>:&#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">		<span class="function"><span class="title">doLogin</span>(<span class="params"></span>)</span>&#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">			VueEvent.emit(<span class="string">&#x27;login&#x27;</span>)</span></span></span><br><span class="line"><span class="javascript"><span class="xml">		&#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">	&#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">&#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">用户登录组件</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span></span><br><span class="line"><span class="javascript"><span class="xml"><span class="keyword">import</span> VueEvent <span class="keyword">from</span> <span class="string">&#x27;../model/event&#x27;</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">	<span class="function"><span class="title">mounted</span>(<span class="params"></span>)</span>&#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">		VueEvent.on(<span class="string">&#x27;login&#x27;</span>,<span class="function">() =&gt;</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">			alert(<span class="string">&#x27;doLogin&#x27;</span>)</span></span></span><br><span class="line"><span class="javascript"><span class="xml">		&#125;)</span></span></span><br><span class="line"><span class="javascript"><span class="xml">	&#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">&#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<h5 id="Vue3-x组件自定义事件验证"><a href="#Vue3-x组件自定义事件验证" class="headerlink" title="Vue3.x组件自定义事件验证"></a>Vue3.x组件自定义事件验证</h5><p>父组件</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">	<span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">		<span class="tag">&lt;<span class="name">login</span> @<span class="attr">submit</span>=<span class="string">&quot;getChild&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">login</span>&gt;</span></span></span><br><span class="line"><span class="xml">	<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span></span><br><span class="line"><span class="javascript"><span class="xml"><span class="keyword">import</span> Login <span class="keyword">from</span> <span class="string">&quot;./Login&quot;</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">	<span class="function"><span class="title">data</span>(<span class="params"></span>)</span>&#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">		<span class="keyword">return</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">			<span class="attr">title</span>: <span class="string">&#x27;hello vue&#x27;</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">		&#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">	&#125;,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">	<span class="attr">components</span>:&#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">		Login</span></span></span><br><span class="line"><span class="javascript"><span class="xml">	&#125;,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">	<span class="attr">methods</span>:&#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">		<span class="function"><span class="title">getChild</span>(<span class="params">data</span>)</span>&#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">			alert(data)</span></span></span><br><span class="line"><span class="javascript"><span class="xml">		&#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">	&#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">&#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<p>子组件</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">	<span class="xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;username&quot;</span> /&gt;</span></span></span><br><span class="line">	&lt;br&gt;</span><br><span class="line">	<span class="xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;password&quot;</span> /&gt;</span></span></span><br><span class="line">	&lt;br&gt;</span><br><span class="line"></span><br><span class="line">	<span class="xml"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;run&quot;</span>&gt;</span>通过广播方式实现子组件给父组件传值<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span></span><br><span class="line"><span class="javascript"><span class="xml"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">	<span class="comment">// 建议定义所有发出的事件，以便更好地记录组件应该如何工作</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">	<span class="attr">emits</span>: &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">		<span class="attr">submit</span> :<span class="function">(<span class="params">&#123;</span></span></span></span></span><br><span class="line"><span class="params"><span class="function"><span class="javascript"><span class="xml">			username,</span></span></span></span></span><br><span class="line"><span class="params"><span class="function"><span class="javascript"><span class="xml">			password</span></span></span></span></span><br><span class="line"><span class="params"><span class="function"><span class="javascript"><span class="xml">		&#125;</span>) =&gt;</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">			<span class="keyword">if</span> (username &amp;&amp; password) &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">				<span class="keyword">return</span> <span class="literal">true</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">			&#125; <span class="keyword">else</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">				<span class="built_in">console</span>.warn(<span class="string">&quot;传入的参数不能为空&quot;</span>)</span></span></span><br><span class="line"><span class="javascript"><span class="xml">				<span class="keyword">return</span> <span class="literal">false</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">			&#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">		&#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">	&#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">	<span class="function"><span class="title">data</span>(<span class="params"></span>)</span>&#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">		<span class="keyword">return</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">			<span class="attr">username</span>: <span class="string">&#x27;张三&#x27;</span>,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">			<span class="attr">password</span>: <span class="string">&#x27;&#x27;</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">		&#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">	&#125;,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">	<span class="attr">methods</span>:&#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">		<span class="function"><span class="title">run</span>(<span class="params"></span>)</span>&#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">			<span class="built_in">this</span>.$emit(<span class="string">&#x27;submit&#x27;</span>,&#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">				<span class="attr">username</span>: <span class="built_in">this</span>.username,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">				<span class="attr">password</span>: <span class="built_in">this</span>.password</span></span></span><br><span class="line"><span class="javascript"><span class="xml">			&#125;)</span></span></span><br><span class="line"><span class="javascript"><span class="xml">		&#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">	&#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">&#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<h5 id="Vue3-x过滤器"><a href="#Vue3-x过滤器" class="headerlink" title="Vue3.x过滤器"></a>Vue3.x过滤器</h5><p>在3.x中，过滤器被删除，不再受支持。建议用方法调用或计算属性替换它们。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Bank Account Balance<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; accountBalance | currencyUSD &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span></span><br><span class="line"><span class="javascript"><span class="xml"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  <span class="attr">props</span>: &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="attr">accountBalance</span>: &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">      <span class="attr">type</span>: <span class="built_in">Number</span>,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">      <span class="attr">require</span>: <span class="literal">true</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">    &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  &#125;,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  <span class="attr">filters</span>: &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="function"><span class="title">currencyUSD</span>(<span class="params">value</span>)</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">      <span class="keyword">return</span> <span class="string">&#x27;$&#x27;</span> + value</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">&#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Bank Account Balance<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; currencyUSD &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span></span><br><span class="line"><span class="javascript"><span class="xml"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  <span class="attr">props</span>: &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="attr">accountBalance</span>: &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">      <span class="attr">type</span>: <span class="built_in">Number</span>,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">      <span class="attr">require</span>: <span class="literal">true</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">    &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  &#125;,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  <span class="attr">computed</span>: &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="function"><span class="title">currencyUSD</span>(<span class="params"></span>)</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">      <span class="keyword">return</span> <span class="string">&#x27;$&#x27;</span> + <span class="built_in">this</span>.accountBalance</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">&#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<h5 id="多根节点组件"><a href="#多根节点组件" class="headerlink" title="多根节点组件"></a>多根节点组件</h5><p>Vue2.x</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">header</span>&gt;</span><span class="tag">&lt;/<span class="name">header</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">main</span>&gt;</span><span class="tag">&lt;/<span class="name">main</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">footer</span>&gt;</span><span class="tag">&lt;/<span class="name">footer</span>&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<p>Vue3.x中可以使用多个根节点</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="xml"><span class="tag">&lt;<span class="name">header</span>&gt;</span>...<span class="tag">&lt;/<span class="name">header</span>&gt;</span></span></span><br><span class="line">  <span class="xml"><span class="tag">&lt;<span class="name">main</span> <span class="attr">v-bind</span>=<span class="string">&quot;$attrs&quot;</span>&gt;</span>...<span class="tag">&lt;/<span class="name">main</span>&gt;</span></span></span><br><span class="line">  <span class="xml"><span class="tag">&lt;<span class="name">footer</span>&gt;</span>...<span class="tag">&lt;/<span class="name">footer</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<h5 id="按键修饰符"><a href="#按键修饰符" class="headerlink" title="按键修饰符"></a>按键修饰符</h5><p>Vue2.x</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;input v-on:keyup<span class="number">.13</span>=<span class="string">&quot;submit&quot;</span>&gt;</span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">v-on:keyup.enter</span>=<span class="string">&quot;submit&quot;</span>&gt;</span></span></span><br><span class="line"><span class="xml">Vue.config.keyCode= &#123; f1: 112 &#125;</span></span><br></pre></td></tr></table></figure>

<p>Vue3.x 别名支持任意键</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;input v-on:keyup.delete=<span class="string">&quot;cancel&quot;</span>&gt;</span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">v-on:keyup.f1</span>=<span class="string">&quot;cancel&quot;</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<h5 id="渲染功能render函数"><a href="#渲染功能render函数" class="headerlink" title="渲染功能render函数"></a>渲染功能render函数</h5><p>Vue2.x</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params">h</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> h(<span class="string">&#x27;div&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Vue3.x</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; h &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> h(<span class="string">&#x27;div&#x27;</span>, &#123;<span class="attr">class</span>: <span class="string">&#x27;red&#x27;</span>&#125;, <span class="string">&#x27;hello, Vue3.x!&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="Vue3更好用的v-model指令"><a href="#Vue3更好用的v-model指令" class="headerlink" title="Vue3更好用的v-model指令"></a>Vue3更好用的v-model指令</h5><p>1、概述：数据双向绑定</p>
<p>2、回顾：在Vue2.x中，v-model进行数据双向绑定（语法糖）的原理</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;my-component v-model=<span class="string">&quot;msg&quot;</span>&gt;&lt;/my-components&gt;</span><br><span class="line">&lt;!-- 等价于 --&gt;</span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">my-component</span> <span class="attr">:value</span>=<span class="string">&quot;msg&quot;</span> @<span class="attr">input</span>=<span class="string">&quot;msg=$event&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">my-components</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 组件中接收绑定数据和触发数据改变</span></span><br><span class="line">props:&#123; <span class="attr">msg</span>: <span class="built_in">String</span> &#125; <span class="comment">// 获取数据</span></span><br><span class="line"><span class="built_in">this</span>.$emit(<span class="string">&#x27;input&#x27;</span>, <span class="string">&#x27;newValue&#x27;</span>) <span class="comment">// 触发事件并传值</span></span><br></pre></td></tr></table></figure>

<p>用于自定义组件时，v-model的prop和事件默认名称已更改：</p>
<p>prop: value -&gt; modelValue</p>
<p>event: input -&gt; update:modelValue</p>
<p>即</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;xxComponent v-model=<span class="string">&quot;varA&quot;</span> /&gt;</span><br></pre></td></tr></table></figure>

<p>等价于</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;xxComponent :modelValue=<span class="string">&quot;varA&quot;</span> @update:modelValue=<span class="string">&quot;varA = $event&quot;</span> /&gt;</span><br></pre></td></tr></table></figure>

<p>且在Vue2.x中不能绑定多个v-model</p>
<p>3、用例：Vue3.x重写了v-model的实现方式以适用绑定多个v-model</p>
<p>①：单个数据实现数据双向绑定</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;my-component v-model=<span class="string">&quot;msg&quot;</span>&gt;&lt;/my-components&gt;</span><br><span class="line">&lt;!-- 等价于 --&gt;</span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">myComponent</span> <span class="attr">:modelValue</span>=<span class="string">&quot;msg&quot;</span> @<span class="attr">update:modelValue</span>=<span class="string">&quot;msg = $event&quot;</span> /&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 组件中接收绑定数据和触发数据改变</span></span><br><span class="line">props:&#123; <span class="attr">modelValue</span>: <span class="built_in">String</span> &#125; <span class="comment">// 获取数据</span></span><br><span class="line"><span class="function"><span class="title">setup</span>(<span class="params">props, &#123;emit&#125;</span>)</span>&#123;</span><br><span class="line">  emit(<span class="string">&#x27;update:modelValue&#x27;</span>, <span class="string">&#x27;newValue&#x27;</span>) <span class="comment">// 触发事件并传值</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>②：多个数据实现数据双向绑定</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;my-component v-model:msg=<span class="string">&quot;msg&quot;</span> v-model:name=<span class="string">&quot;name&quot;</span>&gt;&lt;/my-components&gt;</span><br><span class="line">&lt;!-- 等价于 --&gt;</span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">myComponent</span> <span class="attr">:msg</span>=<span class="string">&quot;msg&quot;</span> @<span class="attr">update:msg</span>=<span class="string">&quot;msg = $event&quot;</span> <span class="attr">:name</span>=<span class="string">&quot;name&quot;</span> @<span class="attr">update:name</span>=<span class="string">&quot;name = $event&quot;</span>/&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 组件中接收绑定数据和触发数据改变</span></span><br><span class="line">props:&#123; <span class="attr">msg</span>: <span class="built_in">String</span>, <span class="attr">name</span>: <span class="built_in">String</span> &#125; <span class="comment">// 获取数据</span></span><br><span class="line"><span class="function"><span class="title">setup</span>(<span class="params">props, &#123;emit&#125;</span>)</span>&#123;</span><br><span class="line">  emit(<span class="string">&#x27;update:msg&#x27;</span>, <span class="string">&#x27;newValue&#x27;</span>) <span class="comment">// 触发事件并传值</span></span><br><span class="line">  emit(<span class="string">&#x27;update:name&#x27;</span>, <span class="string">&#x27;newValue&#x27;</span>) <span class="comment">// 触发事件并传值</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h6 id="修饰符"><a href="#修饰符" class="headerlink" title="修饰符"></a>修饰符</h6><p>支持vue2.x的所有修饰符</p>
<ul>
<li>.lazy 取代input监听change事件</li>
<li>.number 输入字符串转为有效的数字</li>
<li>.trim 输入首尾空格过滤</li>
</ul>
<h6 id="支持自定义修饰符"><a href="#支持自定义修饰符" class="headerlink" title="支持自定义修饰符"></a>支持自定义修饰符</h6><p>例子：自定义prop名+自定义修饰符</p>
<p><strong>父组件：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;zi v-model:content.camelCase=&quot;word&quot; /&gt;</span><br></pre></td></tr></table></figure>

<p>子组件较复杂，用组合式API来演示。</p>
<p>defineProps函数的写法就是这样，先写content，然后写contentModifiers，这是Vue的规定，必须是prop名跟Modefiers字串。contentModifiers必须是这样一个函数。</p>
<p>useContext和getCurrentInstance在开发中会经常用到。useContext()能拿到几个变量，包括props变量。getCurrentInstance()能拿到组件实例this，用来执行.emit()</p>
<p>content必须是计算变量，否则传入prop新值之后，子组件无法感知</p>
<p>emitCamelCase方法里，if语句是为了确认修饰符正确</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">:value</span>=<span class="string">&quot;content&quot;</span> @<span class="attr">input</span>=<span class="string">&quot;emitCamelCase&quot;</span>&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span>&gt;</span><span class="javascript"></span></span></span><br><span class="line"><span class="javascript"><span class="xml"><span class="keyword">import</span> &#123; useContext, getCurrentInstance, defineProps, computed &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">defineProps(&#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  <span class="attr">content</span>: <span class="built_in">String</span>,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  <span class="attr">contentModifiers</span>: &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="attr">default</span>: <span class="function">() =&gt;</span> (&#123;&#125;)</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">&#125;)</span></span></span><br><span class="line"><span class="javascript"><span class="xml"><span class="keyword">const</span> ctx = useContext()</span></span></span><br><span class="line"><span class="javascript"><span class="xml"><span class="keyword">const</span> instance = getCurrentInstance()</span></span></span><br><span class="line"><span class="javascript"><span class="xml"><span class="keyword">let</span> content = computed(<span class="function">() =&gt;</span> &#123; ctx.props.content &#125;)</span></span></span><br><span class="line"><span class="javascript"><span class="xml"><span class="function"><span class="keyword">function</span> <span class="title">emitCamelCase</span>(<span class="params">e</span>)</span>&#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  <span class="keyword">if</span> (ctx.props.contentModifiers.camelCase) &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    instance.emit(<span class="string">&quot;update:content&quot;</span>, e.target.value.replace(<span class="regexp">/_./g</span>, <span class="function">(<span class="params">a</span>) =&gt;</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">      <span class="keyword">return</span> a[<span class="number">1</span>].toUpperCase()</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    &#125;))</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">&#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<h5 id="vue3-v-is指令"><a href="#vue3-v-is指令" class="headerlink" title="vue3 v-is指令"></a>vue3 v-is指令</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// vue的动态组件中使用is</span></span><br><span class="line">&lt;component is=<span class="string">&quot;foo&quot;</span>&gt;&lt;/component&gt;</span><br><span class="line"><span class="comment">// vue2.x --&gt; is的值指的是要渲染的组件的名称；渲染foo组件 </span></span><br><span class="line"><span class="comment">// vue3.x --&gt; is的值指的是要渲染的组件的名称；渲染foo组件 </span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 一般组件中使用is</span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">user-edit</span> <span class="attr">is</span>=<span class="string">&quot;foo&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">user-edit</span>&gt;</span></span></span><br><span class="line"><span class="comment">// vue2.x --&gt; is的值指的是要江染的组件的名称;渲染foo组件</span></span><br><span class="line"><span class="comment">// vue3.x --&gt; 渲染user- edit组件; is将作为组件的prop进行值的传递</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 一般元素中使用is</span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">tr</span> <span class="attr">is</span>=<span class="string">&quot;val&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span></span><br><span class="line"><span class="comment">// vue2.x ---&gt; is的值会被编译为boolean; 且元素会被动态加载或销毁(会触发transition效果)</span></span><br><span class="line"><span class="comment">// vue3.x ---&gt; is的值为any; 值的变化不会造成元素任何变化(丢失了vue2中元素上使用的s的功能，因此vue3中引入了新的指令v-is)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// vue3.x的新指令 v-is</span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">tr</span> <span class="attr">v-is</span>=<span class="string">&quot;val&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span></span><br><span class="line"><span class="comment">// 与vue2. x中-般元素上使用is的效果-致</span></span><br></pre></td></tr></table></figure>

<h5 id="v-for中使用ref"><a href="#v-for中使用ref" class="headerlink" title="v-for中使用ref"></a>v-for中使用ref</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// vue2.x </span></span><br><span class="line">&lt;p v-<span class="keyword">for</span>=”item <span class="keyword">in</span> renderData<span class="string">&quot; :key=&quot;</span>item.name<span class="string">&quot; ref=”nodes&quot;</span>&gt;&#123;&#123;item.name&#125;&#125;&lt;/p&gt;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">this</span>.$refs.nodes) <span class="comment">// 返回所有循环的p元素节点</span></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// vue3.x</span></span><br><span class="line"><span class="comment">//如果还是按照Vue2.x的方式</span></span><br><span class="line">&lt;p v-<span class="keyword">for</span>=<span class="string">&quot;item in renderData&quot;</span> :key= <span class="string">&quot;item.name&quot;</span> ref=<span class="string">&quot;nodes&quot;</span>&gt;&lt;/p&gt;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">this</span>.$refs.nodes) <span class="comment">//此时只能得到循环后最后一个P元素节点</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Vue3.x中，使用函数处理v-for中的ref;且用变量单独存储。</span></span><br><span class="line">&lt;p v-<span class="keyword">for</span>=<span class="string">&quot;item in renderData&quot;</span> :key=<span class="string">&quot; item.name&quot;</span> ref=<span class="string">&quot;handleNodes&quot;</span>&gt;&lt;/p&gt;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">setup</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">const</span> data = reactive(&#123;</span><br><span class="line">    <span class="attr">nodes</span>: []</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="keyword">const</span> handleNodes = <span class="function"><span class="params">nodeItem</span> =&gt;</span> &#123;</span><br><span class="line">    data.nodes.push(nodeItem)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    ...toRefs(data)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="mixin-的合并行为更改"><a href="#mixin-的合并行为更改" class="headerlink" title="mixin 的合并行为更改"></a>mixin 的合并行为更改</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// mixin</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="function"><span class="title">data</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&#x27;zhangsan&#x27;</span>,</span><br><span class="line">      <span class="attr">age</span>: <span class="number">20</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// vue2.x</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="function"><span class="title">data</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">age</span>: <span class="number">30</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="title">mounted</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.$data); <span class="comment">// &#123;name: &#x27;zhangsan&#x27;, age: 30&#125;</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.name); <span class="comment">// &#x27;zhangsan</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.age); <span class="comment">// 30</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// vue3.x</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="function"><span class="title">data</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">age</span>: <span class="number">30</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="title">mounted</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.$data); <span class="comment">// &#123;age: 30&#125;</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.name); <span class="comment">// &#x27;zhangsan</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.age); <span class="comment">// 30</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>得出结论：</strong></p>
<p>1、与vue2.x一样会覆盖掉mixin中相同的响应属性。</p>
<p>2、vue3.x中当前实例的$data是不会包含mixin中定义的响应属性</p>
<h5 id="v-if和v-for优先级"><a href="#v-if和v-for优先级" class="headerlink" title="v-if和v-for优先级"></a>v-if和v-for优先级</h5><p>当v-if和v-for同时作用于一个元素上时：</p>
<p>Vue2.x中v-for的优先级会高于v-if;</p>
<p>Vue3.x中v-if的优先级会高于v-for;</p>
<p>使用禁忌: Vue3.x中不能将v -for和v-if放在同-个元素上。只能使用v-for嵌套v -if使用</p>
<p>使用建议:官方建议使用计算属性来处理,即提高性能，又能兼容Vue3.x。</p>
<h5 id="attrs和-listener的融合"><a href="#attrs和-listener的融合" class="headerlink" title="$attrs和$listener的融合"></a>$attrs和$listener的融合</h5><p>我们知道，在vue2中我们使用v-bind=”$attrs”, v-on=”$listenner”来将数据和事件做一个承 上启下的作用,但是在vue3中,首先是删除了v-on指令，其次是发现这两个组件的属性过于累赘，所以在当前版本中将$attrs 和$listenner他们的功能进行了融合, $listenner 现在已作为$attrs 的其中一部分进行传递,所以只需要在组建上指定v-bind=”$attrs”，那么将同时拥有传值和传递事件的功能。</p>
<h5 id="setup说明"><a href="#setup说明" class="headerlink" title="setup说明"></a>setup说明</h5><ul>
<li>setup</li>
</ul>
<p>setup有两个参数props和context</p>
<ul>
<li><p>props：接收父组件传的值</p>
</li>
<li><p>context：vue3.x里面没有this，提供了一个context上下文属性，你可以通过这个属性去获取进行一些vue2.x用this实现的操作</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">  <span class="attr">props</span>: &#123;</span><br><span class="line">    <span class="attr">title</span>: &#123;</span><br><span class="line">      <span class="attr">type</span>: <span class="built_in">String</span>,</span><br><span class="line">      <span class="attr">default</span>: <span class="string">&quot;&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="title">setup</span>(<span class="params">props, context</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(props.title);</span><br><span class="line">    </span><br><span class="line">    context.attrs</span><br><span class="line">    context.slots</span><br><span class="line">    context.parent</span><br><span class="line">    context.root</span><br><span class="line">    context.emit</span><br><span class="line">    context.refs</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<p>在setup中定义的变量或方法，都必须通过<strong>return</strong> {xxx,xxx} 暴露出去，外界才能使用</p>
<p><strong>注意：</strong>props为响应式代理，如果使用es6的数据解构操作，将使得结构后的数据失去响应式（即不能实时获取到父组件传来的值）</p>
<p><strong>扩展：</strong>父组件通过属性传的值在子组件中的各个部分的获取：</p>
<ol>
<li>props：通过父传子的方式直接获取到值</li>
<li>setup(props, context){}方法中的props只能拿到选项props中已经定义的属性</li>
<li>setup(props, {attrs, emit, slots}){}方法中的attrs只能拿到未在选项props中定义的属性</li>
<li>通过{proxy} = getCurrentInstance(); proxy.attrs; 组件实例中的attrs也只能拿到未在选项props中定义的属性</li>
</ol>
<p><strong>context：</strong>非响应式的对象，包含了组件暴露的三个property</p>
<ol>
<li>context.attrs：传入组件中但是未被props接收的对象</li>
<li>context.emit：用于触发当前组件实例上的传值事件</li>
<li>context.slots：用来访问被插槽分发的内容（一般用于使用渲染函数来书写一个组件时）</li>
</ol>
<p>**return()**：若需要在当前组件视图中或其它组件中使用当前组件创建的响应式变量及方法，则需要导出相应的响应式变量及方法</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123;name&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span></span><br><span class="line"><span class="javascript"><span class="xml"><span class="keyword">import</span> &#123; ref &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  <span class="function"><span class="title">setup</span>(<span class="params">props, context</span>)</span>&#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="keyword">const</span> name = ref(<span class="string">&quot;zhang_san&quot;</span>)</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="keyword">return</span> &#123; name &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">&#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<p>return 也有渲染功能</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">import</span> &#123; ref, h &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="function"><span class="title">setup</span>(<span class="params">props, context</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="function">() =&gt;</span> h(<span class="string">&#x27;div&#x27;</span>, &#123;<span class="attr">class</span>: <span class="string">&#x27;red&#x27;</span>&#125;, <span class="string">&#x27;内容&#x27;</span>);</span><br><span class="line">    <span class="comment">// &lt;template&gt;&lt;div class=&quot;red&quot;&gt;内容&lt;/div&gt;&lt;/template&gt;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h5 id="响应式数据对象-reactive"><a href="#响应式数据对象-reactive" class="headerlink" title="响应式数据对象 reactive"></a>响应式数据对象 reactive</h5><p>1、概述：函数，创建一个响应式数据对象，响应式会影响到所有的子集嵌套</p>
<p>2、用例：由vue提供，按需引入：import { reactive } from ‘vue’</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123;user.name&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span></span><br><span class="line"><span class="javascript"><span class="xml"><span class="keyword">import</span> &#123; reactive &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  <span class="function"><span class="title">setup</span>(<span class="params">props, context</span>)</span>&#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="keyword">const</span> user = reactive(&#123; <span class="attr">name</span>: <span class="string">&#x27;lisi&#x27;</span>, <span class="attr">age</span>: <span class="number">20</span>&#125;)</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="keyword">return</span> &#123; user &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">&#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<h5 id="延伸方法–readonly只读对象"><a href="#延伸方法–readonly只读对象" class="headerlink" title="延伸方法–readonly只读对象"></a>延伸方法–readonly只读对象</h5><p><strong>readonly()</strong></p>
<p>1、概述：创建一个只读代理且原对象的任何嵌套属性也将是只读的</p>
<p>2、用例：由vue提供，按需引入：import { readonly } from ‘vue’</p>
<p>3、对普通变量创建只读</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">import</span> &#123; readonly &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="function"><span class="title">setup</span>(<span class="params">props, context</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> user = &#123; <span class="attr">name</span>: <span class="string">&#x27;lisi&#x27;</span>, <span class="attr">age</span>: <span class="number">20</span>&#125;</span><br><span class="line">    <span class="keyword">const</span> copy = readonly(user)</span><br><span class="line">    <span class="keyword">return</span> &#123; copy &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">copy.age++ <span class="comment">// warning! target is readonly</span></span><br></pre></td></tr></table></figure>

<p>4、对reactive创建只读</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">import</span> &#123; reactive, readonly &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="function"><span class="title">setup</span>(<span class="params">props, context</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> user = reactive(&#123; <span class="attr">name</span>: <span class="string">&#x27;lisi&#x27;</span>, <span class="attr">age</span>: <span class="number">20</span>&#125;)</span><br><span class="line">    <span class="keyword">const</span> copy = readonly(user)</span><br><span class="line">    <span class="keyword">return</span> &#123; copy &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">user.age++	<span class="number">21</span></span><br><span class="line">copy.age++ <span class="comment">// warning! target is readonly</span></span><br></pre></td></tr></table></figure>

<h5 id="延伸方法–isProxy"><a href="#延伸方法–isProxy" class="headerlink" title="延伸方法–isProxy()"></a>延伸方法–isProxy()</h5><p>1、概述判断对象是否由reactive创建或者是readonly创建的代理</p>
<p>2、用例：由vue提供，按需引入：import { isproxy } from ‘vue’</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;ref, reactive, readonly, isproxy&#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//ref创建</span></span><br><span class="line"><span class="keyword">const</span> refVal = ref(<span class="number">123</span>)</span><br><span class="line">isProxy(refVal) <span class="comment">// false</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//reactive创建</span></span><br><span class="line"><span class="keyword">const</span> reactiveVal = reactive(&#123;<span class="attr">age</span>: <span class="number">20</span>&#125;)</span><br><span class="line">isProxy(reactiveVal) <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//reactive创建</span></span><br><span class="line"><span class="keyword">const</span> readonlyVal = readonly(reactiveVal)</span><br><span class="line">isProxy(readonlyVal) <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//普通变量</span></span><br><span class="line"><span class="keyword">const</span> defaultVal = <span class="string">&#x27;default&#x27;</span></span><br><span class="line">isProxy(defaultVal) <span class="comment">// false</span></span><br></pre></td></tr></table></figure>

<h5 id="isReactive"><a href="#isReactive" class="headerlink" title="isReactive()"></a>isReactive()</h5><p>1、检查对象是否由reactive创建</p>
<p>2、用例：由vue提供，按需引入：import { isReactive } from ‘vue’</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; reactive, isReactive &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="function"><span class="title">setup</span>(<span class="params">props, context</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> user = reactive(&#123; <span class="attr">name</span>: <span class="string">&#x27;lisi&#x27;</span>, <span class="attr">age</span>: <span class="number">20</span>&#125;)</span><br><span class="line">    <span class="built_in">console</span>.log(isReactive(user)); <span class="comment">// true</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>还能判断readonly代理的对象是否由reactive创建</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; reactive, isReactive, readonly &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="function"><span class="title">setup</span>(<span class="params">props, context</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> user = reactive(&#123; <span class="attr">name</span>: <span class="string">&#x27;lisi&#x27;</span>, <span class="attr">age</span>: <span class="number">20</span>&#125;)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 创建普通只读代理</span></span><br><span class="line">    <span class="keyword">const</span> plain = readonly(&#123;<span class="attr">name</span>: <span class="string">&#x27;lisi&#x27;</span>&#125;)</span><br><span class="line">    <span class="built_in">console</span>.log(isReactive(plain)); <span class="comment">// false</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 创建reactive制度代理</span></span><br><span class="line">    <span class="keyword">const</span> copy = readonly(user)</span><br><span class="line">    <span class="built_in">console</span>.log(isReactive(copy)); <span class="comment">// true</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="延伸方法–-isReadonly"><a href="#延伸方法–-isReadonly" class="headerlink" title="延伸方法– isReadonly()"></a>延伸方法– isReadonly()</h5><p>1、概述：检查代理是否由readonly创建</p>
<p>2、用例：由vue提供，按需引入：import { isReadonly } from ‘vue’</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; reactive, readonly, isReadonly &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="function"><span class="title">setup</span>(<span class="params">props, context</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> user = reactive(&#123; <span class="attr">name</span>: <span class="string">&#x27;lisi&#x27;</span>, <span class="attr">age</span>: <span class="number">20</span>&#125;)</span><br><span class="line">    <span class="keyword">const</span> copy = readonly(user)</span><br><span class="line">    <span class="built_in">console</span>.log(isReadonly(copy)); <span class="comment">// true</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="延伸方法–toRaw"><a href="#延伸方法–toRaw" class="headerlink" title="延伸方法–toRaw()"></a>延伸方法–toRaw()</h5><p>1、概述：返回由reactive或者是readonly代理的原始对象</p>
<p>2、用例：由vue提供，按需引入：import { toRaw } from ‘vue’</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; reactive, readonly, isProxy, toRaw &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="function"><span class="title">setup</span>(<span class="params">props, context</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> user = &#123;&#125;</span><br><span class="line">    <span class="keyword">const</span> reactiveUser = reactive(user)</span><br><span class="line">    <span class="keyword">const</span> readonlyUser = readonly(readonlyUser)</span><br><span class="line"></span><br><span class="line">    <span class="built_in">console</span>.log(toRaw(reactiveUser) === user); <span class="comment">// true</span></span><br><span class="line">    <span class="built_in">console</span>.log(toRaw(readonlyUser) === user); <span class="comment">// true</span></span><br><span class="line">    <span class="built_in">console</span>.log(isProxy(toRaw(reactiveUser))); <span class="comment">// false</span></span><br><span class="line">    <span class="built_in">console</span>.log(isProxy(toRaw(readonlyUser))); <span class="comment">// false</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="延伸方法–markRaw"><a href="#延伸方法–markRaw" class="headerlink" title="延伸方法–markRaw()"></a>延伸方法–markRaw()</h5><p>1、概述：标记一个对象，被标记后，该对象永远不会被转换为代理</p>
<p>2、用例：由vue提供，按需引入：import { markRaw } from ‘vue’</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; markRaw, reactive, isReactive, isProxy &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="function"><span class="title">setup</span>(<span class="params">props, context</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> user = markRaw(&#123;&#125;)</span><br><span class="line">    <span class="keyword">const</span> reactiveUser = reactive(user)</span><br><span class="line">    <span class="built_in">console</span>.log(isReactive(reactiveUser)); <span class="comment">// false</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> reactiveUser1 = reactive(&#123; user &#125;)</span><br><span class="line">    <span class="built_in">console</span>.log(isProxy(toRaw(reactiveUser1))); <span class="comment">// true</span></span><br><span class="line">    <span class="built_in">console</span>.log(isProxy(toRaw(reactiveUser1.user))); <span class="comment">// false</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="延伸方法–shallowReactive"><a href="#延伸方法–shallowReactive" class="headerlink" title="延伸方法–shallowReactive()"></a>延伸方法–shallowReactive()</h5><p>1、概述：创建一个反应式代理，但只是浅度创建</p>
<p>2、用例：由vue提供，按需引入：import { shallowReactive } from ‘vue’</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; isReactive, shallowReactive &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="function"><span class="title">setup</span>(<span class="params">props, context</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> data = shallowReactive(&#123;</span><br><span class="line">      <span class="attr">count</span>: <span class="number">10</span>,</span><br><span class="line">      <span class="attr">content</span>: &#123;</span><br><span class="line">        <span class="attr">age</span>: <span class="number">20</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    data.count++ <span class="comment">// 11 逻辑层数据已发生变化,视图重新渲染</span></span><br><span class="line">    isReactive(data.content) <span class="comment">// 因为data.content属于深度嵌套，未被代理</span></span><br><span class="line">    data.content.age++ <span class="comment">// 21 逻辑层数据发生变化，但是视图层不会被更新渲染</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="延伸方法–shallowReadonly"><a href="#延伸方法–shallowReadonly" class="headerlink" title="延伸方法–shallowReadonly()"></a>延伸方法–shallowReadonly()</h5><p>1、概述：创建一个只读代理，但只是浅度创建</p>
<p>2、用例：由vue提供，按需引入：import { shallowReadonly } from ‘vue’</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; isReadonly, shallowReadonly &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="function"><span class="title">setup</span>(<span class="params">props, context</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> data = shallowReadonly(&#123;</span><br><span class="line">      <span class="attr">count</span>: <span class="number">10</span>,</span><br><span class="line">      <span class="attr">content</span>: &#123;</span><br><span class="line">        <span class="attr">age</span>: <span class="number">20</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    data.count++ <span class="comment">// warning! target is readonly.</span></span><br><span class="line">    isReadonly(data.content) <span class="comment">// 因为data.content属于深度嵌套，未被代理</span></span><br><span class="line">    data.content.age++ <span class="comment">// 21 深度嵌套未被代理，所以操作成功</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="响应式数据–-ref"><a href="#响应式数据–-ref" class="headerlink" title="响应式数据– ref"></a>响应式数据– ref</h5><p>1、概述：函数，创建并返回一个响应式数据对象，并在此对象上只包含一个.value属性指向该数据值</p>
<p>2、用例：由vue提供，按需引入：import { ref } from ‘vue’</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123;name&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span> </span><br><span class="line">  &lt;!-- 视图中直接使用即可，不需要.value --&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span></span><br><span class="line"><span class="javascript"><span class="xml"><span class="keyword">import</span> &#123; ref &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  <span class="function"><span class="title">setup</span>(<span class="params">props, context</span>)</span>&#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="keyword">const</span> name = ref(<span class="string">&#x27;zhang_san&#x27;</span>)</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="built_in">console</span>.log(name.value); <span class="comment">// &#x27;zhang_san&#x27;</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="comment">// 同样需要return返回</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="keyword">return</span> &#123; name &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">&#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<p>如果使用ref将一个对象创建为响应式代理的话，则该对象会被进行深度响应式创建</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123;data.count&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span>   &lt;!-- <span class="number">0</span> --&gt;</span><br><span class="line">  <span class="xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123;data.content.age&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span>   &lt;!-- <span class="number">10</span> --&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span></span><br><span class="line"><span class="javascript"><span class="xml"><span class="keyword">import</span> &#123; ref &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  <span class="function"><span class="title">setup</span>(<span class="params">props, context</span>)</span>&#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="keyword">const</span> defaultVal = &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">      <span class="attr">count</span>: <span class="number">0</span>,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">      <span class="attr">content</span>: &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        <span class="attr">age</span>: <span class="number">10</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">      &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="keyword">const</span> data = ref(defaultVal)</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="built_in">console</span>.log(data.value.count); <span class="comment">// 0</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="built_in">console</span>.log(data.value.content.age); <span class="comment">// 10</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="keyword">return</span> &#123; data &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">&#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line">data.value.count++ <span class="comment">// 1 视图重新渲染</span></span><br><span class="line">data.value.content.age++ <span class="comment">// 11 视图重新渲染</span></span><br></pre></td></tr></table></figure>

<h5 id="ref数据能访问到的部分常用方法及延伸方法"><a href="#ref数据能访问到的部分常用方法及延伸方法" class="headerlink" title="ref数据能访问到的部分常用方法及延伸方法"></a>ref数据能访问到的部分常用方法及延伸方法</h5><h6 id="unref"><a href="#unref" class="headerlink" title="unref()"></a>unref()</h6><p>1、概述：返回代理原始值，如果参数为ref则返回代理原始值，如果不是ref则返回参数本身</p>
<p>2、用例：由vue提供，按需引入：import { unref } from ‘vue’</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; unref &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">const</span> a = ref(<span class="number">1</span>)</span><br><span class="line"><span class="keyword">const</span> b = <span class="string">&#x27;zhang_san&#x27;</span></span><br><span class="line"><span class="built_in">console</span>.log(unref(a)); <span class="comment">// 1</span></span><br><span class="line"><span class="built_in">console</span>.log(unref(b)); <span class="comment">// &#x27;zhang_san&#x27;</span></span><br></pre></td></tr></table></figure>

<h6 id="toRef"><a href="#toRef" class="headerlink" title="toRef()"></a>toRef()</h6><p>1、概述：可以将reactive创建的代理的某个属性传递出来用ref进行代理</p>
<p>2、用例：由vue提供，按需引入：import { toRef } from ‘vue’</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; reactive, toRef &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">const</span> data = reactive(&#123; <span class="attr">name</span>: <span class="string">&#x27;zhang_san&#x27;</span>, <span class="attr">age</span>: <span class="number">20</span> &#125;)</span><br><span class="line"><span class="keyword">const</span> toRefValue = toRef(data, <span class="string">&#x27;age&#x27;</span>)</span><br><span class="line"></span><br><span class="line">toRefValue.value++ <span class="comment">// toRefValue.value 21</span></span><br><span class="line"><span class="built_in">console</span>.log(data.age); <span class="comment">// 21</span></span><br><span class="line"></span><br><span class="line">data.age++ <span class="comment">// data.age 22</span></span><br><span class="line"><span class="built_in">console</span>.log(toRefValue.value); <span class="comment">// 22</span></span><br></pre></td></tr></table></figure>

<p>3、<strong>注意：使用toRef将reactive的属性代理后，属性的值的变化会同时影响toRef后的值和原本的reactive的属性值</strong></p>
<p>4、实例：在将prop的引用传递给复合函数的时候，toRef将非常有用</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">setup</span>(<span class="params">props</span>)</span>&#123;</span><br><span class="line">	userHandler(toRef(props, <span class="string">&#x27;name&#x27;</span>))</span><br><span class="line">	<span class="comment">// 这将使得userHandler拿到的name为响应式代理</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h6 id="toRefs"><a href="#toRefs" class="headerlink" title="toRefs()"></a>toRefs()</h6><p>1、概述：可以将reactive创建的代理的所有属性传递出来用ref进行代理</p>
<p>2、用例：由vue提供，按需引入：import { toRefs } from ‘vue’</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; reactive, toRefs &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">const</span> data = reactive(&#123; <span class="attr">name</span>: <span class="string">&#x27;zhang_san&#x27;</span>, <span class="attr">age</span>: <span class="number">20</span> &#125;)</span><br><span class="line"><span class="keyword">const</span> toRefValue = toRefs(data)</span><br><span class="line"></span><br><span class="line">toRefValue.age.value++ <span class="comment">// toRefValue.age.value 21</span></span><br><span class="line"><span class="built_in">console</span>.log(data.age); <span class="comment">// 21</span></span><br><span class="line"></span><br><span class="line">data.age++ <span class="comment">// data.age 22</span></span><br><span class="line"><span class="built_in">console</span>.log(toRefValue.age.value); <span class="comment">// 22</span></span><br></pre></td></tr></table></figure>

<p>3、<strong>注意：使用toRefs将reactive的属性代理后，属性的值的变化会同时影响toRef后的对应属性值和原本的reactive的属性值</strong></p>
<p>4、实例：从组合函数返回响应式对象时，这将很有用，<strong>而不是使用es6数据结构的方式，这样会使reactive的属性失去响应式代理</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">userHandler</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> state = reactive(&#123; <span class="attr">name</span>: <span class="string">&#x27;zhang_san&#x27;</span>, <span class="attr">age</span>: <span class="number">20</span> &#125;)</span><br><span class="line">  <span class="keyword">return</span> toRefs(state)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="function"><span class="title">setup</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; name, age &#125; = userHandler()</span><br><span class="line">    <span class="keyword">return</span> &#123; name, age &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h6 id="isRef"><a href="#isRef" class="headerlink" title="isRef()"></a>isRef()</h6><p>1、概述：判断响应式代理是否为ref所创建</p>
<p>2、用例：由vue提供，按需引入：import { isRef } from ‘vue’</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; ref, reactive, isRef &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">const</span> name = ref(<span class="string">&#x27;zhang_san&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> user = reactive(&#123; <span class="attr">sex</span>: <span class="string">&#x27;男&#x27;</span>, <span class="attr">age</span>: <span class="number">20</span> &#125;)</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(isRef(name)); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(isRef(user)); <span class="comment">// false</span></span><br><span class="line"><span class="comment">// 应用场景，在获取一个未知的数据对象的值时，如：</span></span><br><span class="line"><span class="keyword">const</span> newV = isRef(name) ? name.value : name</span><br></pre></td></tr></table></figure>

<h5 id="toRefs-–-解构响应式对象数据"><a href="#toRefs-–-解构响应式对象数据" class="headerlink" title="toRefs – 解构响应式对象数据"></a>toRefs – 解构响应式对象数据</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>解构响应式对象数据<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>UserName: &#123;&#123;username&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Age: &#123;&#123;age&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span></span><br><span class="line"><span class="javascript"><span class="xml"><span class="keyword">import</span> &#123; reactive, toRefs &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  <span class="function"><span class="title">setup</span>(<span class="params"></span>)</span>&#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="keyword">const</span> user = reactive(&#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">      <span class="attr">username</span>: <span class="string">&#x27;zhang_san&#x27;</span>,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">      <span class="attr">age</span>: <span class="number">20</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">    &#125;)</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="keyword">return</span> &#123; ...toRefs(user) &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">&#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<h5 id="reactive和ref的相互作用"><a href="#reactive和ref的相互作用" class="headerlink" title="reactive和ref的相互作用"></a>reactive和ref的相互作用</h5><p>1、将ref的数据对象挂载到reactive上时，会把原始的响应数据对象展开为原始值，这样就不需要.value而被直接访问到</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="function"><span class="title">setup</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> ref1 = ref(<span class="number">0</span>)</span><br><span class="line">    <span class="keyword">const</span> reactive1 = reactive(&#123;ref1&#125;)</span><br><span class="line">    <span class="built_in">console</span>.log(reactive1.ref1); <span class="comment">// 0</span></span><br><span class="line">    reactive1.ref1++</span><br><span class="line">    <span class="built_in">console</span>.log(reactive1.ref1); <span class="comment">// 1</span></span><br><span class="line">    <span class="built_in">console</span>.log(ref1.value); <span class="comment">// 1</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>2、新的ref会覆盖旧的ref</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="function"><span class="title">setup</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> ref1 = ref(<span class="number">0</span>)</span><br><span class="line">    <span class="keyword">const</span> reactive1 = reactive(&#123;ref1&#125;)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">const</span> ref2 = ref(<span class="number">100</span>)</span><br><span class="line">    reactive.ref1 = ref2</span><br><span class="line">    reactive.ref1++</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">console</span>.log(reactive1.ref1); <span class="comment">// 101</span></span><br><span class="line">    <span class="built_in">console</span>.log(ref2.value); <span class="comment">// 101</span></span><br><span class="line">    <span class="built_in">console</span>.log(ref1.value); <span class="comment">// 0</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="reactive和ref的区别"><a href="#reactive和ref的区别" class="headerlink" title="reactive和ref的区别"></a>reactive和ref的区别</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; reactive, ref &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="function"><span class="title">setup</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">let</span> num1 = <span class="number">10</span></span><br><span class="line">    <span class="keyword">let</span> num2 = ref(<span class="number">10</span>)</span><br><span class="line">    <span class="keyword">let</span> num3 = reactive(<span class="number">100</span>)</span><br><span class="line">    <span class="built_in">console</span>.log(num1); <span class="comment">// 定义的纯数字10, 打印结果是一个数字类型的10</span></span><br><span class="line">    <span class="built_in">console</span>.log(num2); <span class="comment">// 使用vue3中提供的ref方法定义的值 打印的时候是一个对象</span></span><br><span class="line">    <span class="built_in">console</span>.log(num3); <span class="comment">// 使用reactive定义的num3 结果是一个数值类型100</span></span><br><span class="line">    <span class="keyword">return</span> &#123; num1, num2, num3 &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>我们发现使用ref定义的数据，打印结果是一个被对象包裹的响应的数据，使用reactive的方式和纯变量声明的方式打印结果是一样的，这是什么原因呢</p>
<p>我们发现在控制台输出一个警告信息，提示100这个值不能被reactive创建，官方也推荐我们在定义数据的时候，reactive定义复杂的数据类型的数据，ref推荐定义基本数据类型，所以如果要使用reactive第一基本数据类型的话，我们需要在reactive中将数据包裹一下</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> num3 = reactive(&#123;<span class="attr">val</span>: <span class="number">100</span>&#125;)</span><br></pre></td></tr></table></figure>

<p>我们在使用reactive定义数据的时候用对象做一层包裹，这样控制台就不会报警告信息了</p>
<p>但是使用reactive定义的数据和ref定义的数据打印结果有一些差异</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> num2 = ref(<span class="number">10</span>)</span><br><span class="line"><span class="keyword">let</span> num3 = reactive(&#123;<span class="attr">val</span>: <span class="number">100</span>&#125;)</span><br><span class="line"><span class="built_in">console</span>.log(num2); <span class="comment">// 使用vue3中提供的ref方法定义的值 打印的时候是一个对象</span></span><br><span class="line"><span class="built_in">console</span>.log(num3); <span class="comment">// 使用reactive定义的num3 结果是一个数值类型100</span></span><br></pre></td></tr></table></figure>

<p>我们发现ref定义的数据打印结果需要.value才能获取到结果，而reactive则不需要</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> num2 = ref(<span class="number">10</span>)</span><br><span class="line"><span class="keyword">let</span> num3 = reactive(&#123;<span class="attr">val</span>:<span class="number">100</span>&#125;)</span><br><span class="line"><span class="built_in">console</span>.log(num2.value) <span class="comment">// 10 </span></span><br><span class="line"><span class="built_in">console</span>.log(num) <span class="comment">// &#123;val:100&#125;</span></span><br></pre></td></tr></table></figure>

<p>总结：</p>
<p>reactive和ref都是用来定义响应式数据的，reactive更推荐去定义复杂的数据类型，ref更推荐定义基本数据类型</p>
<p>ref和reactive本质我们可以简单的理解为ref是对reactive的二次包装，ref定义的数据访问的时候要多一个.value</p>
<p>使用ref定义一本数据类型，ref也可以定义数组和对象</p>
<p><strong>ref函数仅能监听基本类型的变化，不能监听复杂类型的变化(比如数组，对象)</strong></p>
<h5 id="计算属性–-computed"><a href="#计算属性–-computed" class="headerlink" title="计算属性– computed"></a>计算属性– computed</h5><p>1、概述：vue2.x中的计算属性，在vue3.x中以方法的形式使用</p>
<p>2、用例：用例：由vue提供，按需引入：import { computed } from ‘vue’</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; computed, ref &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="function"><span class="title">setup</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> age = ref(<span class="number">20</span>)</span><br><span class="line">    <span class="keyword">const</span> userAge = computed(<span class="function">() =&gt;</span> <span class="string">`今年<span class="subst">$&#123;age.value&#125;</span>岁了`</span>)</span><br><span class="line">    <span class="keyword">return</span> &#123; userAge &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>带有get和set功能的用法</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; computed, ref &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="function"><span class="title">setup</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> age = ref(<span class="number">20</span>)</span><br><span class="line">    <span class="keyword">const</span> userAge = computed(&#123;</span><br><span class="line">      <span class="attr">get</span>: <span class="function">() =&gt;</span> <span class="string">`今年<span class="subst">$&#123;age.value&#125;</span>岁了`</span>,</span><br><span class="line">      <span class="attr">set</span>: <span class="function"><span class="params">val</span> =&gt;</span> age.value = age + <span class="number">1</span></span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">return</span> &#123; userAge &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="观察者–-watch"><a href="#观察者–-watch" class="headerlink" title="观察者– watch"></a>观察者– watch</h5><p>1、概述：vue2.x中的响应式变量监听，在vue3.x中以方法的形式使用</p>
<p>2、用例：用例：由vue提供，按需引入：import { watch} from ‘vue’</p>
<p>3、监听单一数据</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; ref, reactive, computed, watch &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="function"><span class="title">setup</span>(<span class="params">props</span>)</span>&#123;</span><br><span class="line">    <span class="comment">//ref</span></span><br><span class="line">    <span class="keyword">const</span> age = ref(<span class="number">20</span>)</span><br><span class="line">    watch(<span class="function">() =&gt;</span> age.value, <span class="function">(<span class="params">nv, ov</span>) =&gt;</span> &#123; ... &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// reactive</span></span><br><span class="line">    <span class="keyword">const</span> product = reactive(&#123; <span class="attr">name</span>: <span class="string">&#x27;pig&#x27;</span>, <span class="attr">conut</span>: <span class="number">1</span>&#125;)</span><br><span class="line">    watch(<span class="function">() =&gt;</span> product.count, <span class="function">(<span class="params">nv, ov</span>) =&gt;</span> &#123; ... &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// props</span></span><br><span class="line">    watch(<span class="function">() =&gt;</span> props.msg, <span class="function">(<span class="params">nv, ov</span>) =&gt;</span> &#123; ... &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="comment">//computed</span></span><br><span class="line">    <span class="keyword">const</span> userAge = computed(<span class="function">() =&gt;</span> <span class="string">`今年<span class="subst">$&#123;age.value&#125;</span>岁了`</span>)</span><br><span class="line">    watch(<span class="function">() =&gt;</span> userAge.value, <span class="function">(<span class="params">nv, ov</span>) =&gt;</span> &#123; ... &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>4、监听对象</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; ref, reactive, watch &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="function"><span class="title">setup</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="comment">//ref</span></span><br><span class="line">    <span class="keyword">const</span> user = ref(&#123; <span class="attr">name</span>: <span class="string">&#x27;zhang_san&#x27;</span>, <span class="attr">age</span>: <span class="number">20</span> &#125;)</span><br><span class="line">    <span class="comment">// 字面量引发的监听触发： user.value = &#123; ... &#125;</span></span><br><span class="line">    watch(<span class="function">() =&gt;</span> user.value, <span class="function">(<span class="params">nv, ov</span>) =&gt;</span> &#123; ... &#125;)</span><br><span class="line">    <span class="comment">// 如果使用user.value.age = 30 这种方式修改user的age值，将不会触发上面的监听，需要使用watch的第三个参数(深度监听)</span></span><br><span class="line">    watch(<span class="function">() =&gt;</span> user.value, <span class="function">(<span class="params">nv, ov</span>) =&gt;</span> &#123; ... &#125;, &#123; <span class="attr">deep</span>: <span class="literal">true</span> &#125;)</span><br><span class="line">    <span class="comment">// 如果我们只需要监听name的值，那么</span></span><br><span class="line">    watch(<span class="function">() =&gt;</span> user.value.name, <span class="function">(<span class="params">nv, ov</span>) =&gt;</span> &#123; ... &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// reactive</span></span><br><span class="line">    <span class="keyword">const</span> reactiveData = reactive(&#123; <span class="attr">user</span>: &#123; <span class="attr">name</span>: <span class="string">&#x27;zhang_san&#x27;</span>, <span class="attr">age</span>: <span class="number">20</span> &#125;&#125;)</span><br><span class="line">    <span class="comment">// 字面量引发的监听触发： user.value = &#123; ... &#125;</span></span><br><span class="line">    watch(<span class="function">() =&gt;</span> reactiveData.user, <span class="function">(<span class="params">nv, ov</span>) =&gt;</span> &#123; ... &#125;)</span><br><span class="line">    <span class="comment">// 如果使用user.value.age = 30 这种方式修改user的age值，将不会触发上面的监听，需要使用watch的第三个参数(深度监听)</span></span><br><span class="line">    watch(<span class="function">() =&gt;</span> reactiveData.user, <span class="function">(<span class="params">nv, ov</span>) =&gt;</span> &#123; ... &#125;, &#123; <span class="attr">deep</span>: <span class="literal">true</span> &#125;)</span><br><span class="line">    <span class="comment">// 如果我们只需要监听name的值，那么</span></span><br><span class="line">    watch(<span class="function">() =&gt;</span> reactiveData.user.name, <span class="function">(<span class="params">nv, ov</span>) =&gt;</span> &#123; ... &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>5、监听数组</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; ref, reactive, watch &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="function"><span class="title">setup</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="comment">//ref</span></span><br><span class="line">    <span class="keyword">const</span> user = ref([</span><br><span class="line">      &#123; <span class="attr">name</span>: <span class="string">&#x27;zhang_san&#x27;</span>, <span class="attr">age</span>: <span class="number">20</span> &#125;,</span><br><span class="line">      &#123; <span class="attr">name</span>: <span class="string">&#x27;li_si&#x27;</span>, <span class="attr">age</span>: <span class="number">10</span> &#125;,</span><br><span class="line">    ])</span><br><span class="line">    <span class="comment">// 字面量引发的监听触发： user.value = &#123; ... &#125;</span></span><br><span class="line">    watch(<span class="function">() =&gt;</span> user.value, <span class="function">(<span class="params">nv, ov</span>) =&gt;</span> &#123; ... &#125;)</span><br><span class="line">    <span class="comment">// 如果使用数组的操作方法( 如：push() )或者user.value[0].age = 20这类操作去修改数组某项的属性值，将不会触发监听，也需要使用深度监听</span></span><br><span class="line">    watch(<span class="function">() =&gt;</span> user.value, <span class="function">(<span class="params">nv, ov</span>) =&gt;</span> &#123; ... &#125;, &#123; <span class="attr">deep</span>: <span class="literal">true</span> &#125;)</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// reactive</span></span><br><span class="line">    <span class="keyword">const</span> reactiveData = reactive(&#123; <span class="attr">user</span>: [</span><br><span class="line">      &#123; <span class="attr">name</span>: <span class="string">&#x27;zhang_san&#x27;</span>, <span class="attr">age</span>: <span class="number">20</span> &#125;,</span><br><span class="line">      &#123; <span class="attr">name</span>: <span class="string">&#x27;li_si&#x27;</span>, <span class="attr">age</span>: <span class="number">20</span> &#125;,</span><br><span class="line">    ]&#125;)</span><br><span class="line">    <span class="comment">// 字面量引发的监听触发： user.value = &#123; ... &#125;</span></span><br><span class="line">    watch(<span class="function">() =&gt;</span> reactiveData.user, <span class="function">(<span class="params">nv, ov</span>) =&gt;</span> &#123; ... &#125;)</span><br><span class="line">    <span class="comment">// 如果使用数组的操作方法( 如：push() )或者user.value[0].age = 20这类操作去修改数组某项的属性值，将不会触发监听，也需要使用深度监听</span></span><br><span class="line">    watch(<span class="function">() =&gt;</span> reactiveData.user, <span class="function">(<span class="params">nv, ov</span>) =&gt;</span> &#123; ... &#125;, &#123; <span class="attr">deep</span>: <span class="literal">true</span> &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>6、监听多个数组</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; ref, reactive, watch &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="function"><span class="title">setup</span>(<span class="params">props</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> age = ref(<span class="number">20</span>)</span><br><span class="line">    <span class="keyword">const</span> user = ref(&#123; <span class="attr">name</span>: <span class="string">&#x27;zhang_san&#x27;</span>, <span class="attr">age</span>: <span class="number">20</span> &#125;)</span><br><span class="line"></span><br><span class="line">    watch([<span class="function">() =&gt;</span> age.value, <span class="function">() =&gt;</span> user.name], <span class="function">(<span class="params">[newAge, newName], [oldAge, newName]</span>) =&gt;</span> &#123; ... &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>7、终止监听</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; ref, watch &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">const</span> age = ref(<span class="number">20</span>)</span><br><span class="line"><span class="comment">// watch监听会返回一个方法</span></span><br><span class="line"><span class="keyword">const</span> stop = watch(age, <span class="function">(<span class="params">nv, ov</span>) =&gt;</span> &#123; ... &#125;)</span><br><span class="line"><span class="comment">// 当调用此方法后，该监听就会被移除</span></span><br><span class="line">stop()</span><br></pre></td></tr></table></figure>

<p>8、清除watch中无效的异步任务</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;keywords&quot;</span>&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span></span><br><span class="line"><span class="javascript"><span class="xml"><span class="keyword">import</span> &#123; ref, reactive, watch &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  <span class="function"><span class="title">setup</span>(<span class="params"></span>)</span>&#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="keyword">const</span> keywords = ref(<span class="string">&quot;&quot;</span>)</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="comment">//异步任务：打印用户输入的关键词</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="keyword">const</span> asyncPrint = <span class="function"><span class="params">val</span> =&gt;</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">      <span class="keyword">return</span> <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        <span class="built_in">console</span>.log(val);</span></span></span><br><span class="line"><span class="javascript"><span class="xml">      &#125;, <span class="number">1000</span>)</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span></span></span><br><span class="line"><span class="javascript"><span class="xml">    watch(</span></span></span><br><span class="line"><span class="javascript"><span class="xml">      keywords,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">      <span class="function">(<span class="params">keywords, prevKeywords, onCleanup</span>) =&gt;</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        <span class="comment">// 执行异步任务，并得到关闭异步任务的 timerId</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">        <span class="keyword">const</span> timerId = asyncPrint(keywords)</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        <span class="comment">// 如果 watch 监听被重复了，则会先清除上次未完成的异步任务</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">        onCleanup(<span class="function">() =&gt;</span> <span class="built_in">clearTimeout</span>(timerId))</span></span></span><br><span class="line"><span class="javascript"><span class="xml">      &#125;,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">      &#123; <span class="attr">lazy</span>: <span class="literal">true</span> &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    )</span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="keyword">return</span> &#123; keywords &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">&#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<h5 id="provide和inject"><a href="#provide和inject" class="headerlink" title="provide和inject"></a>provide和inject</h5><p>1、概述：实现嵌套组件树形数据传递与接收</p>
<p>2、使用：由vue提供，按需引入：import { provide, inject } from ‘vue’</p>
<p>3、用例</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; provide, inject &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="comment">//父组件注入</span></span><br><span class="line"><span class="keyword">const</span> component = &#123;</span><br><span class="line">  <span class="function"><span class="title">setup</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    provide(<span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;zhang_san&#x27;</span>)</span><br><span class="line">    <span class="comment">// 如果是需要注入多个值则重复使用provide即可</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 子组件接收</span></span><br><span class="line"><span class="keyword">const</span> children = &#123;</span><br><span class="line">  <span class="function"><span class="title">setup</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="comment">// inject的第二个参数为没有接收到注入的数据时的默认返回值，如果没有，则返回undefined</span></span><br><span class="line">    <span class="keyword">const</span> user = inject(<span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;li_si&#x27;</span>)</span><br><span class="line">    <span class="comment">// 需要接收多个注入的值也是重复使用inject</span></span><br><span class="line">    <span class="keyword">return</span> &#123; user &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>4、实例：在实际使用过程中，往往我们需要将注入的值实现响应式变化，则需要注入响应式</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//父组件注入</span></span><br><span class="line"><span class="keyword">const</span> component = &#123;</span><br><span class="line">  <span class="function"><span class="title">setup</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> user = reactive(&#123; <span class="attr">name</span>: <span class="string">&#x27;zhang_san&#x27;</span>, <span class="attr">age</span>: <span class="number">20</span> &#125;)</span><br><span class="line">    provide(<span class="string">&#x27;user&#x27;</span>, user)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 子组件接收后，如果父组件中的user发生了改变，则子组件中也会发生响应式变化</span></span><br><span class="line"><span class="keyword">const</span> children = &#123;</span><br><span class="line">  <span class="function"><span class="title">setup</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> user = inject(<span class="string">&#x27;user&#x27;</span>, &#123;&#125;)</span><br><span class="line">    <span class="keyword">return</span> &#123; user &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>5、注意：<strong>不建议在注入时对响应式变量进行改变(在子组件中改变注入的值)，因为此操作会改变vue的单向数据流，建议采用注入改变其值的方法来对响应式变量进行改变</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; reactive, provide, inject &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="comment">//父组件注入</span></span><br><span class="line"><span class="keyword">const</span> component = &#123;</span><br><span class="line">  <span class="function"><span class="title">setup</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> user = reactive(&#123; <span class="attr">name</span>: <span class="string">&#x27;zhang_san&#x27;</span>, <span class="attr">age</span>: <span class="number">20</span> &#125;)</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">changeHandler</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">      user.age = <span class="number">30</span></span><br><span class="line">    &#125;</span><br><span class="line">    provide(<span class="string">&#x27;user&#x27;</span>, user)</span><br><span class="line">    provide(<span class="string">&#x27;changeHandler&#x27;</span>, changeHandler)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 子组件接收后，通过调用注入的方法来对响应式变量进行改变</span></span><br><span class="line"><span class="keyword">const</span> children = &#123;</span><br><span class="line">  <span class="function"><span class="title">setup</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> user = inject(<span class="string">&#x27;user&#x27;</span>, &#123;&#125;)</span><br><span class="line">    <span class="keyword">const</span> changeHandler = inject(<span class="string">&#x27;changeHandler&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span> &#123; user, changeHandler &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="template和ref获取元素或组件实例"><a href="#template和ref获取元素或组件实例" class="headerlink" title="template和ref获取元素或组件实例"></a>template和ref获取元素或组件实例</h5><p>1、概述：通过ref获取模板元素节点</p>
<p>2：使用：由vue提供，按需引入：import { ref } from ‘vue’</p>
<p>3、回顾：options API中是：this.refs.refAdd(获取某个组件)或者this.refs.refDiv(获取某个元素节点)</p>
<p>4、用例：</p>
<ul>
<li>在组件或节点中定义ref属性：add(ref=”refAdd”)或div(ref=”refDiv”)</li>
<li>在setup中定义对应ref属性相同的变量名，赋值为任意值即可</li>
<li>访问方式为：refAdd.value或refDiv.value</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">ref</span>=<span class="string">&quot;divBox&quot;</span>&gt;</span>content<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"> </span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span></span><br><span class="line"><span class="javascript"><span class="xml"><span class="keyword">import</span> &#123; ref &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  <span class="function"><span class="title">setup</span>(<span class="params"></span>)</span>&#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="keyword">const</span> divBox = ref(<span class="literal">null</span>); <span class="comment">// &lt;div ref=&quot;divBox&quot;&gt;content&lt;/div&gt;</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="keyword">const</span> user = ref(<span class="literal">null</span>); <span class="comment">// user.value -&gt; null</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="keyword">return</span> &#123; divBox &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">&#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<p>4、注意：</p>
<p><strong>①：元素节点对应ref的分配只会在render时进行对比赋值，因此若在setup中未将对应的响应式变量return出来，则不会获取到组件实例或元素节点</strong></p>
<p><strong>②：在满足①的前提下，只要在定义变量时变量名称与当前组件中ref属性值相同，则该变量会被统一赋值为组件实例或元素节点，与定义变量时的赋值无关</strong></p>
<p>setup的context中访问到refs对象，所以获取组件实例或者元素节点的方式还可以</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">ref</span>=<span class="string">&quot;divBox&quot;</span>&gt;</span>content<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span></span><br><span class="line"><span class="javascript"><span class="xml"><span class="keyword">import</span> &#123; ref &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  <span class="function"><span class="title">setup</span>(<span class="params">props, &#123; refs &#125;</span>)</span>&#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="keyword">const</span> divBox = refs.divBox;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="keyword">return</span> &#123; divBox &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">&#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<h5 id="vue3-x中的emits选项"><a href="#vue3-x中的emits选项" class="headerlink" title="vue3.x中的emits选项"></a>vue3.x中的emits选项</h5><p>vue3.x组件自定义事件实现子组件给父组件传值</p>
<p>注意：vue官方推荐你始终使用<strong>kebab-case</strong>的事件名</p>
<p>子组件</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="xml"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;run&quot;</span>&gt;</span>通过广播方式实现子组件给父组件传值<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span></span><br><span class="line"><span class="javascript"><span class="xml"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  <span class="comment">// 建议定义所有发出的事件，以便更好地记录组件应该如何工作、</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">  <span class="attr">emit</span>: [<span class="string">&#x27;run-parent&#x27;</span>],</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  <span class="function"><span class="title">data</span>(<span class="params"></span>)</span>&#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="keyword">return</span> &#123;&#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  &#125;,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  <span class="attr">methods</span>: &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="function"><span class="title">run</span>(<span class="params"></span>)</span>&#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">      <span class="built_in">this</span>.$emit(<span class="string">&quot;run-parent&quot;</span>, <span class="string">&quot;传给爸爸&quot;</span>)</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  &#125;,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">&#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<p>1、概述：当前组件的通过emit的事件列表</p>
<p>2：类型：Array|Object</p>
<p>3、作用：vue3.0中使用emit发起事件时会要求当前组件记录emit事件(没有则控制台会抛出警告)</p>
<p>4、用途：用于记录当前组件emit的事件，当为对象时，则可以验证传入的值是否有效</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">setup</span>(<span class="params">prop, &#123; emit &#125;</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">const</span> changeOne = <span class="function"><span class="params">val</span> =&gt;</span> &#123;</span><br><span class="line">    emit(<span class="string">&#x27;on-changeOne&#x27;</span>, val)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">const</span> changeTwo = <span class="function"><span class="params">val</span> =&gt;</span> &#123;</span><br><span class="line">    emit(<span class="string">&#x27;on-changeTwo&#x27;</span>, val)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>用法一：数组用法</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">emits</span>: [<span class="string">&#x27;on-changeOne&#x27;</span>, <span class="string">&#x27;on-changeTwo&#x27;</span>],</span><br><span class="line">  <span class="function"><span class="title">setup</span>(<span class="params"></span>)</span>&#123; ... &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>用法二：对象用法，当emits为对象时，可以验证事件中的参数是否有效</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">emits</span>: &#123;</span><br><span class="line">    <span class="attr">click</span>: <span class="literal">null</span>,</span><br><span class="line">    <span class="string">&#x27;on-changeOne&#x27;</span>: <span class="function"><span class="params">payload</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (...) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>; <span class="comment">// 验证通过</span></span><br><span class="line">      &#125;</span><br><span class="line">      <span class="built_in">console</span>.warn(<span class="string">&#x27;验证失败！&#x27;</span>)</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span>; <span class="comment">// 验证失败，控制台打印警告信息“验证失败”</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&#x27;on-changeTwo&#x27;</span>: <span class="function"><span class="params">payload</span> =&gt;</span> &#123; ... &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="title">setup</span>(<span class="params"></span>)</span>&#123; ... &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="vue3-x核心值getCurrentInstance"><a href="#vue3-x核心值getCurrentInstance" class="headerlink" title="vue3.x核心值getCurrentInstance"></a>vue3.x核心值getCurrentInstance</h5><p>1、概述：一个很重要的方法，获取当前组件的实例、上下文来操作router和vuex等</p>
<p>2、使用：由vue提供，按需引入：import { getCurrentInstance } from ‘vue’</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; getCurrentInstance &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="comment">// 获取当前组件实例</span></span><br><span class="line"><span class="keyword">const</span> instance = getCurrentInstance();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取当前组件的上下文，下面两种方式都能获取到组件的上下文</span></span><br><span class="line"><span class="keyword">const</span> &#123; ctx &#125; = getCurrentInstance(); <span class="comment">// 方式一，这种方式只能在开发环境下使用，生产环境下的ctx将访问不到</span></span><br><span class="line"><span class="keyword">const</span> &#123; proxy &#125; = getCurrentInstance(); <span class="comment">// 方式二，此方法在开发环境及生产环境都能放到组件上下文对象(推荐)</span></span><br><span class="line"><span class="comment">// ctx 中包含了组件中由ref和reactive创建的响应式数据对象，以及以下对象及方法</span></span><br><span class="line">proxy.$attrs</span><br><span class="line">proxy.$data</span><br><span class="line">proxy.$el</span><br><span class="line">proxy.$emit</span><br><span class="line">proxy.$forceUpdate</span><br><span class="line">proxy.$nextTick</span><br><span class="line">proxy.$options</span><br><span class="line">proxy.$parent</span><br><span class="line">proxy.$props</span><br><span class="line">proxy.$refs</span><br><span class="line">proxy.$root</span><br><span class="line">proxy.$slots</span><br><span class="line">proxy.$watch</span><br></pre></td></tr></table></figure>

<h5 id="vue3-x中我们采用mitt实现全局事件总成"><a href="#vue3-x中我们采用mitt实现全局事件总成" class="headerlink" title="vue3.x中我们采用mitt实现全局事件总成"></a>vue3.x中我们采用mitt实现全局事件总成</h5><p>1、前言：由于vue3.x中删除了on和off，因此不能借助于一个单独的vue实例来实现全局事件的发布和订阅与取消订阅(也就是组件通讯)</p>
<p>2、概述：mitt是一个三方库，npm安装：npm install -D mitt</p>
<p>3、使用：我们同样使用插件的方式将mitt集成到vue中</p>
<p>4、mitt对象：</p>
<ul>
<li>all (map对象)：包含了所有订阅的事件名称，及对应的处理方法数组</li>
<li>emit (方法)：触发事件，参数为（事件名(方法名), 携带的参数），当前携带的参数只能为一个，不能为多个</li>
<li>on (方法)：创建事件订阅，参数为(事件名，处理方法)</li>
<li>off (方法)：取消事件订阅，参数为(事件名，处理方法)</li>
</ul>
<p>5、全局事件总成搭建</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> _ <span class="keyword">from</span> <span class="string">&#x27;lodash&#x27;</span></span><br><span class="line"><span class="keyword">import</span> mitt <span class="keyword">from</span> <span class="string">&#x27;mitt&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="function"><span class="title">install</span>(<span class="params">Vue, options</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> _emitter = mitt()</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 全局发布(在vue全局方法中自定义$pub发布方法)</span></span><br><span class="line">    <span class="comment">// 这里做了$pub方法能够携带多个参数的处理，方便我们在业务中触发事件时带多个参数</span></span><br><span class="line">    Vue.config.globalProperties.$pub = <span class="function">(<span class="params">...args</span>) =&gt;</span> &#123;</span><br><span class="line">      _emitter.emit(_.head(args), args.slice(<span class="number">1</span>))</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 全局订阅(在vue全局方法中自定义$sub订阅方法)</span></span><br><span class="line">    Vue.config.globalProperties.$sub = <span class="function"><span class="keyword">function</span>(<span class="params">event, callback</span>)</span>&#123;</span><br><span class="line">      <span class="built_in">Reflect</span>.apply(_emitter.on, _emitter, _.toArray(<span class="built_in">arguments</span>))</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 取消订阅</span></span><br><span class="line">    Vue.config.globalProperties.$unsub = <span class="function"><span class="keyword">function</span>(<span class="params">event, callback</span>)</span>&#123;</span><br><span class="line">      <span class="built_in">Reflect</span>.apply(_emitter.off, _emitter, _.toArray(<span class="built_in">arguments</span>))</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>6、组件实例中使用：</p>
<p><strong>全局事件发布</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;child&quot;</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;pubHandler&quot;</span>&gt;</span>发起事件<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span></span><br><span class="line"><span class="javascript"><span class="xml"><span class="keyword">import</span> &#123; onMounted, getCurrentInstance &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  <span class="function"><span class="title">setup</span>(<span class="params">props, context</span>)</span>&#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="keyword">const</span> &#123; proxy &#125; = getCurrentInstance()</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="keyword">const</span> pubHandler = <span class="function">() =&gt;</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">      proxy.$pub(<span class="string">&#x27;foo&#x27;</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="keyword">return</span> &#123; pubHandler &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">&#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<p><strong>全局事件订阅/取消订阅</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;child&quot;</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;unsubHandler&quot;</span>&gt;</span>注销事件<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span></span><br><span class="line"><span class="javascript"><span class="xml"><span class="keyword">import</span> &#123; onMounted, getCurrentInstance &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  <span class="function"><span class="title">setup</span>(<span class="params">props, context</span>)</span>&#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="keyword">const</span> &#123; proxy &#125; = getCurrentInstance()</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="keyword">const</span> watchHandler = <span class="function">(<span class="params">[a, b, c] = args</span>) =&gt;</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">      <span class="built_in">console</span>.log(<span class="string">&#x27;组件监听触发！&#x27;</span>);</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    onMounted(<span class="function">() =&gt;</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">      proxy.$sub(<span class="string">&#x27;foo&#x27;</span>, watchHandler)</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    &#125;)</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="keyword">const</span> unsubHandler = <span class="function">() =&gt;</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">      proxy.$unsub(<span class="string">&#x27;foo&#x27;</span>, watchHandler)</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="keyword">return</span> &#123; unsubHandler &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">&#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<h5 id="Vue-Router在vue3-x中的使用方式及特性"><a href="#Vue-Router在vue3-x中的使用方式及特性" class="headerlink" title="Vue-Router在vue3.x中的使用方式及特性"></a>Vue-Router在vue3.x中的使用方式及特性</h5><p>1、描述：区别于vue2，在vue3中vue-router将使用新的方法来创建路由，其中重要的是：createRouter, createWebHashHistory, createWebHistory这三个方法</p>
<p>2、创建：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// router.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; createRouter, createWebHashHistory, createWebHistory &#125; <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"><span class="keyword">const</span> routes = [...]</span><br><span class="line"><span class="keyword">const</span> router = createRouter(&#123;</span><br><span class="line">  <span class="comment">// 区别于vue2的mode,vue3中将使用history属性来决定采用哪种路由模式</span></span><br><span class="line">  <span class="attr">history</span>: createWebHashHistory(), <span class="comment">// 默认为hash模式，可设置createWebHistory模式</span></span><br><span class="line">  <span class="comment">// 区别于vue2的base，vue3中的基础路由路径将作为createWebHashHistory或者createWebHistory的唯一参数配置到路由中</span></span><br><span class="line">  routes</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// main.js</span></span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&#x27;./routes&#x27;</span></span><br><span class="line"><span class="keyword">const</span> app = createApp(App);</span><br><span class="line"><span class="comment">// 注册路由</span></span><br><span class="line">app.use(router)</span><br></pre></td></tr></table></figure>

<p>3、扩展：在组件中使用路由，查看路由</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// index.vue</span></span><br><span class="line"><span class="comment">// vue-router库当中暴露了useRouter和useRoute两个方法供组件使用，还暴露有其他方法</span></span><br><span class="line"><span class="keyword">import</span> &#123; useRouter, useRoute &#125; <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; onMounted, getCurrentInstance &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="function"><span class="title">setup</span>(<span class="params">props, context</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; proxy &#125; = getCurrentInstance()</span><br><span class="line">    <span class="keyword">const</span> router = useRouter()</span><br><span class="line">    <span class="keyword">const</span> route = useRoute()</span><br><span class="line">    onMounted(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(proxy.$router === router); <span class="comment">// true</span></span><br><span class="line">      <span class="built_in">console</span>.log(route); &#123;path, params, query ...&#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="hooks"><a href="#hooks" class="headerlink" title="hooks"></a>hooks</h5><p>Vue3的hook函数相当于vue2的mixin，不同在于hooks是函数</p>
<p>Vue3的hook函数可以帮助我们提高代码的复用性，让我们能在不同的组件中都利用hooks函数</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; onBeforeUnmounted, onMounted, ref &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> x = ref(-<span class="number">1</span>); <span class="comment">// x绑定为响应式数据</span></span><br><span class="line">  <span class="keyword">const</span> y = ref(-<span class="number">1</span>);</span><br><span class="line">  <span class="keyword">const</span> clickHandler = <span class="function">(<span class="params">event: MouseEvent</span>) =&gt;</span> &#123;</span><br><span class="line">    x.value = event.pageX</span><br><span class="line">    y.value = event.pageY</span><br><span class="line">  &#125;</span><br><span class="line">  onMounted(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">window</span>.addEventListener(<span class="string">&#x27;click&#x27;</span>, clickHandler)</span><br><span class="line">  &#125;)</span><br><span class="line">  onBeforeUnmounted(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">window</span>.removeEventListener(<span class="string">&#x27;click&#x27;</span>, clickHandler)</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    x, y</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="新组件–-Teleport"><a href="#新组件–-Teleport" class="headerlink" title="新组件– Teleport"></a>新组件– Teleport</h5><p>Teleport是一种能够将我们的模板移动到DOM中Vue app之外的其他位置的技术，就有点像哆啦A梦的“任意门”</p>
<p>场景：像modals,toast等这样的元素，很多情况下，我们将它完全的和我们的vue应用的DOM完全剥离，管理起来反而会方便容易很多</p>
<p>原因在于如果我们嵌套在vue的某个组件内部，那么处理前套组件的定位、z-index和样式就会变得很困难</p>
<p>另外，像modals,toast等这样的元素需要使用到vue组件的状态(data或者props)的值</p>
<p>这就是Teleport派上用场的地方，我们可以在组件的逻辑位置写模板代码，这意味着我们可以使用组件的data或props，然后在vue应用的范围之外渲染它</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;button @click=<span class="string">&quot;showToast&quot;</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;btn&quot;</span>&gt;打开toast&lt;/button&gt;</span><br><span class="line">&lt;!-- to 属性就是目标位置 --&gt;</span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">teleport</span> <span class="attr">to</span>=<span class="string">&quot;#teleport-target&quot;</span>&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">v-if</span>=<span class="string">&quot;visiable&quot;</span> <span class="attr">class</span>=<span class="string">&quot;toast-warp&quot;</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;toast-msg&quot;</span>&gt;</span>我是一个toast文案<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">teleport</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<h5 id="vue3中css使用js变量"><a href="#vue3中css使用js变量" class="headerlink" title="vue3中css使用js变量"></a>vue3中css使用js变量</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello Vue 3.0 + Vite<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span></span><br><span class="line"><span class="javascript"><span class="xml">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="function"><span class="title">data</span>(<span class="params"></span>)</span>&#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">      <span class="keyword">return</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        <span class="attr">color</span>: <span class="string">&quot;red&quot;</span>,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        <span class="attr">backg</span>: <span class="string">&quot;blue&quot;</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">      &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">style</span> <span class="attr">vars</span>=<span class="string">&quot;&#123; color, backg&#125;&quot;</span>&gt;</span><span class="css"></span></span></span><br><span class="line"><span class="css"><span class="xml">  <span class="selector-tag">h1</span>&#123;</span></span></span><br><span class="line"><span class="css"><span class="xml">    <span class="attribute">color</span>: <span class="built_in">var</span>(--color);</span></span></span><br><span class="line"><span class="css"><span class="xml">    <span class="attribute">background-color</span>: <span class="built_in">var</span>(--backg);</span></span></span><br><span class="line"><span class="css"><span class="xml">    <span class="attribute">text-align</span>: center;</span></span></span><br><span class="line"><span class="css"><span class="xml">  &#125;</span></span></span><br><span class="line"><span class="css"><span class="xml"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span></span><br></pre></td></tr></table></figure>


    </div>

    
    
    
        

<div>
<ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>本文作者： </strong>Binstar
  </li>
  <li class="post-copyright-link">
    <strong>本文链接：</strong>
    <a href="https://binstar-hb.github.io/hb-myblog.github.io/2021/11/02/vue3%E5%AF%B9%E6%AF%94vue2/" title="vue3对比vue2">https://binstar-hb.github.io/hb-myblog.github.io/2021/11/02/vue3对比vue2/</a>
  </li>
  <li class="post-copyright-license">
    <strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="noopener" target="_blank"><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</a> 许可协议。转载请注明出处！
  </li>
</ul>
</div>


      <div>
        
          <div>
    
        <div style="text-align:center;color: #ccc;font-size:14px;">-------------本文结束<i class="fa fa-paw"></i>感谢您的阅读-------------</div>
    
</div>
        
      </div>

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/hb-myblog.github.io/tags/vue3%E5%AF%B9%E6%AF%94vue2/" rel="tag"># vue3对比vue2</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/hb-myblog.github.io/2021/10/12/js%E5%87%BD%E6%95%B0%E6%9F%AF%E9%87%8C%E5%8C%96/" rel="prev" title="js函数柯里化">
      <i class="fa fa-chevron-left"></i> js函数柯里化
    </a></div>
      <div class="post-nav-item">
    <a href="/hb-myblog.github.io/2022/01/14/Vite/" rel="next" title="Vite构建工具的使用">
      Vite构建工具的使用 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8vue-cli4-0%E5%88%9B%E5%BB%BA%E9%A1%B9%E7%9B%AE"><span class="nav-number">1.</span> <span class="nav-text">使用vue-cli4.0创建项目</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%88%9B%E5%BB%BAvue3%E9%A1%B9%E7%9B%AE-vite%E6%96%B9%E5%BC%8F"><span class="nav-number">2.</span> <span class="nav-text">创建vue3项目-vite方式</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E7%9A%84%E5%8F%98%E5%8C%96"><span class="nav-number">3.</span> <span class="nav-text">生命周期的变化</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#main-js%E4%B8%AD%E5%8F%98%E5%8C%96-%E6%96%B0%E5%A2%9E%E5%85%A8%E5%B1%80API-createApp"><span class="nav-number">4.</span> <span class="nav-text">main.js中变化 新增全局API: createApp()</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#router-js"><span class="nav-number">5.</span> <span class="nav-text">router.js</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#vuex"><span class="nav-number">6.</span> <span class="nav-text">vuex</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%BA%94%E7%94%A8%E9%85%8D%E7%BD%AE"><span class="nav-number">7.</span> <span class="nav-text">应用配置</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%8C%82%E8%BD%BD%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F"><span class="nav-number">8.</span> <span class="nav-text">挂载应用程序</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%B3%A8%E5%86%8C%E5%85%A8%E5%B1%80%E7%BB%84%E4%BB%B6"><span class="nav-number">9.</span> <span class="nav-text">注册全局组件</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%96%B0%E5%A2%9E%E5%85%A8%E5%B1%80%E6%B3%A8%E5%85%A5-%E6%8F%90%E5%8F%96%EF%BC%9Aprovide-inject-%E7%88%B6%E7%BB%84%E4%BB%B6%E6%95%B0%E6%8D%AE%E6%B3%A8%E5%85%A5%E4%B8%8E%E5%AD%90%E5%AD%99%E7%BB%84%E4%BB%B6%E6%95%B0%E6%8D%AE%E8%8E%B7%E5%8F%96"><span class="nav-number">10.</span> <span class="nav-text">新增全局注入&#x2F;提取：provide&#x2F;inject (父组件数据注入与子孙组件数据获取)</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%85%A8%E5%B1%80%E6%96%B9%E6%B3%95"><span class="nav-number">11.</span> <span class="nav-text">全局方法</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8C%87%E4%BB%A4%EF%BC%9Adirective"><span class="nav-number">12.</span> <span class="nav-text">自定义指令：directive</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E8%B7%A8%E7%BB%84%E4%BB%B6%E9%80%9A%E8%AE%AF"><span class="nav-number">13.</span> <span class="nav-text">跨组件通讯</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Vue3-x%E7%BB%84%E4%BB%B6%E8%87%AA%E5%AE%9A%E4%B9%89%E4%BA%8B%E4%BB%B6%E9%AA%8C%E8%AF%81"><span class="nav-number">14.</span> <span class="nav-text">Vue3.x组件自定义事件验证</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Vue3-x%E8%BF%87%E6%BB%A4%E5%99%A8"><span class="nav-number">15.</span> <span class="nav-text">Vue3.x过滤器</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%A4%9A%E6%A0%B9%E8%8A%82%E7%82%B9%E7%BB%84%E4%BB%B6"><span class="nav-number">16.</span> <span class="nav-text">多根节点组件</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%8C%89%E9%94%AE%E4%BF%AE%E9%A5%B0%E7%AC%A6"><span class="nav-number">17.</span> <span class="nav-text">按键修饰符</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%B8%B2%E6%9F%93%E5%8A%9F%E8%83%BDrender%E5%87%BD%E6%95%B0"><span class="nav-number">18.</span> <span class="nav-text">渲染功能render函数</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Vue3%E6%9B%B4%E5%A5%BD%E7%94%A8%E7%9A%84v-model%E6%8C%87%E4%BB%A4"><span class="nav-number">19.</span> <span class="nav-text">Vue3更好用的v-model指令</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#%E4%BF%AE%E9%A5%B0%E7%AC%A6"><span class="nav-number">19.1.</span> <span class="nav-text">修饰符</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#%E6%94%AF%E6%8C%81%E8%87%AA%E5%AE%9A%E4%B9%89%E4%BF%AE%E9%A5%B0%E7%AC%A6"><span class="nav-number">19.2.</span> <span class="nav-text">支持自定义修饰符</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#vue3-v-is%E6%8C%87%E4%BB%A4"><span class="nav-number">20.</span> <span class="nav-text">vue3 v-is指令</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#v-for%E4%B8%AD%E4%BD%BF%E7%94%A8ref"><span class="nav-number">21.</span> <span class="nav-text">v-for中使用ref</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#mixin-%E7%9A%84%E5%90%88%E5%B9%B6%E8%A1%8C%E4%B8%BA%E6%9B%B4%E6%94%B9"><span class="nav-number">22.</span> <span class="nav-text">mixin 的合并行为更改</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#v-if%E5%92%8Cv-for%E4%BC%98%E5%85%88%E7%BA%A7"><span class="nav-number">23.</span> <span class="nav-text">v-if和v-for优先级</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#attrs%E5%92%8C-listener%E7%9A%84%E8%9E%8D%E5%90%88"><span class="nav-number">24.</span> <span class="nav-text">$attrs和$listener的融合</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#setup%E8%AF%B4%E6%98%8E"><span class="nav-number">25.</span> <span class="nav-text">setup说明</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%93%8D%E5%BA%94%E5%BC%8F%E6%95%B0%E6%8D%AE%E5%AF%B9%E8%B1%A1-reactive"><span class="nav-number">26.</span> <span class="nav-text">响应式数据对象 reactive</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%BB%B6%E4%BC%B8%E6%96%B9%E6%B3%95%E2%80%93readonly%E5%8F%AA%E8%AF%BB%E5%AF%B9%E8%B1%A1"><span class="nav-number">27.</span> <span class="nav-text">延伸方法–readonly只读对象</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%BB%B6%E4%BC%B8%E6%96%B9%E6%B3%95%E2%80%93isProxy"><span class="nav-number">28.</span> <span class="nav-text">延伸方法–isProxy()</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#isReactive"><span class="nav-number">29.</span> <span class="nav-text">isReactive()</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%BB%B6%E4%BC%B8%E6%96%B9%E6%B3%95%E2%80%93-isReadonly"><span class="nav-number">30.</span> <span class="nav-text">延伸方法– isReadonly()</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%BB%B6%E4%BC%B8%E6%96%B9%E6%B3%95%E2%80%93toRaw"><span class="nav-number">31.</span> <span class="nav-text">延伸方法–toRaw()</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%BB%B6%E4%BC%B8%E6%96%B9%E6%B3%95%E2%80%93markRaw"><span class="nav-number">32.</span> <span class="nav-text">延伸方法–markRaw()</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%BB%B6%E4%BC%B8%E6%96%B9%E6%B3%95%E2%80%93shallowReactive"><span class="nav-number">33.</span> <span class="nav-text">延伸方法–shallowReactive()</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%BB%B6%E4%BC%B8%E6%96%B9%E6%B3%95%E2%80%93shallowReadonly"><span class="nav-number">34.</span> <span class="nav-text">延伸方法–shallowReadonly()</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%93%8D%E5%BA%94%E5%BC%8F%E6%95%B0%E6%8D%AE%E2%80%93-ref"><span class="nav-number">35.</span> <span class="nav-text">响应式数据– ref</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#ref%E6%95%B0%E6%8D%AE%E8%83%BD%E8%AE%BF%E9%97%AE%E5%88%B0%E7%9A%84%E9%83%A8%E5%88%86%E5%B8%B8%E7%94%A8%E6%96%B9%E6%B3%95%E5%8F%8A%E5%BB%B6%E4%BC%B8%E6%96%B9%E6%B3%95"><span class="nav-number">36.</span> <span class="nav-text">ref数据能访问到的部分常用方法及延伸方法</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#unref"><span class="nav-number">36.1.</span> <span class="nav-text">unref()</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#toRef"><span class="nav-number">36.2.</span> <span class="nav-text">toRef()</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#toRefs"><span class="nav-number">36.3.</span> <span class="nav-text">toRefs()</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#isRef"><span class="nav-number">36.4.</span> <span class="nav-text">isRef()</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#toRefs-%E2%80%93-%E8%A7%A3%E6%9E%84%E5%93%8D%E5%BA%94%E5%BC%8F%E5%AF%B9%E8%B1%A1%E6%95%B0%E6%8D%AE"><span class="nav-number">37.</span> <span class="nav-text">toRefs – 解构响应式对象数据</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#reactive%E5%92%8Cref%E7%9A%84%E7%9B%B8%E4%BA%92%E4%BD%9C%E7%94%A8"><span class="nav-number">38.</span> <span class="nav-text">reactive和ref的相互作用</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#reactive%E5%92%8Cref%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="nav-number">39.</span> <span class="nav-text">reactive和ref的区别</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E8%AE%A1%E7%AE%97%E5%B1%9E%E6%80%A7%E2%80%93-computed"><span class="nav-number">40.</span> <span class="nav-text">计算属性– computed</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E8%A7%82%E5%AF%9F%E8%80%85%E2%80%93-watch"><span class="nav-number">41.</span> <span class="nav-text">观察者– watch</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#provide%E5%92%8Cinject"><span class="nav-number">42.</span> <span class="nav-text">provide和inject</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#template%E5%92%8Cref%E8%8E%B7%E5%8F%96%E5%85%83%E7%B4%A0%E6%88%96%E7%BB%84%E4%BB%B6%E5%AE%9E%E4%BE%8B"><span class="nav-number">43.</span> <span class="nav-text">template和ref获取元素或组件实例</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#vue3-x%E4%B8%AD%E7%9A%84emits%E9%80%89%E9%A1%B9"><span class="nav-number">44.</span> <span class="nav-text">vue3.x中的emits选项</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#vue3-x%E6%A0%B8%E5%BF%83%E5%80%BCgetCurrentInstance"><span class="nav-number">45.</span> <span class="nav-text">vue3.x核心值getCurrentInstance</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#vue3-x%E4%B8%AD%E6%88%91%E4%BB%AC%E9%87%87%E7%94%A8mitt%E5%AE%9E%E7%8E%B0%E5%85%A8%E5%B1%80%E4%BA%8B%E4%BB%B6%E6%80%BB%E6%88%90"><span class="nav-number">46.</span> <span class="nav-text">vue3.x中我们采用mitt实现全局事件总成</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Vue-Router%E5%9C%A8vue3-x%E4%B8%AD%E7%9A%84%E4%BD%BF%E7%94%A8%E6%96%B9%E5%BC%8F%E5%8F%8A%E7%89%B9%E6%80%A7"><span class="nav-number">47.</span> <span class="nav-text">Vue-Router在vue3.x中的使用方式及特性</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#hooks"><span class="nav-number">48.</span> <span class="nav-text">hooks</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%96%B0%E7%BB%84%E4%BB%B6%E2%80%93-Teleport"><span class="nav-number">49.</span> <span class="nav-text">新组件– Teleport</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#vue3%E4%B8%ADcss%E4%BD%BF%E7%94%A8js%E5%8F%98%E9%87%8F"><span class="nav-number">50.</span> <span class="nav-text">vue3中css使用js变量</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Binstar"
      src="/hb-myblog.github.io/images/head.png">
  <p class="site-author-name" itemprop="name">Binstar</p>
  <div class="site-description" itemprop="description">I'm a ghost, I'll eat you.</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/hb-myblog.github.io/archives/">
        
          <span class="site-state-item-count">13</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/hb-myblog.github.io/categories/">
          
        <span class="site-state-item-count">5</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/hb-myblog.github.io/tags/">
          
        <span class="site-state-item-count">10</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Binstar</span>
</div>
  <div class="powered-by">

  </div>

<span id="busuanzi_container_site_uv">
  本站访问次数：<span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
</span>

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
</div>








      </div>
    </footer>
  </div>

  
  <script src="/hb-myblog.github.io/lib/anime.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script>
  <script src="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.js"></script>
  <script src="/hb-myblog.github.io/lib/velocity/velocity.min.js"></script>
  <script src="/hb-myblog.github.io/lib/velocity/velocity.ui.min.js"></script>

<script src="/hb-myblog.github.io/js/utils.js"></script>

<script src="/hb-myblog.github.io/js/motion.js"></script>


<script src="/hb-myblog.github.io/js/schemes/pisces.js"></script>


<script src="/hb-myblog.github.io/js/next-boot.js"></script>


  <script defer src="/hb-myblog.github.io/lib/three/three.min.js"></script>


  




  
<script src="/hb-myblog.github.io/js/local-search.js"></script>













  

  

</body>
</html>
