<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>vue3对比vue2</title>
      <link href="/hb-myblog.github.io/2021/11/02/vue3%E5%AF%B9%E6%AF%94vue2/"/>
      <url>/hb-myblog.github.io/2021/11/02/vue3%E5%AF%B9%E6%AF%94vue2/</url>
      
        <content type="html"><![CDATA[<h5 id="使用vue-cli4-0创建项目"><a href="#使用vue-cli4-0创建项目" class="headerlink" title="使用vue-cli4.0创建项目"></a>使用vue-cli4.0创建项目</h5><p>先把脚手架升级到最新版本，之前没有安装的话，直接全局安装就是最新版4.0</p><p><strong>安装</strong>vue-cli npm install -g @vue/cli</p><p><strong>更新</strong>vue-cli npm update -g @vue/cli</p><p><strong>创建项目：</strong></p><p>vue create vue3-demo</p><p>cd vue3-demo</p><p>yarn serve</p><p><strong>升级vue2项目</strong></p><p>yarn add vue-next</p><h5 id="创建vue3项目-vite方式"><a href="#创建vue3项目-vite方式" class="headerlink" title="创建vue3项目-vite方式"></a>创建vue3项目-vite方式</h5><p>npm init vite-app <project-name></project-name></p><p>cd <project-name></project-name></p><p>yarn</p><p>yarn dev</p><p><strong>vite</strong>是一个基于vue3单文件组件的非打包开发服务器，它做到了本地快速开发启动</p><ul><li>快速的冷启动，不需要等待打包操作</li><li>即时的热模块更新，替换性能和模块数量的解耦让更新飞起</li><li>真正的按需编译，不再等待整个应用编译完成，这是一个巨大的改变</li></ul><h5 id="生命周期的变化"><a href="#生命周期的变化" class="headerlink" title="生命周期的变化"></a>生命周期的变化</h5><table><thead><tr><th>vue2.x</th><th>vue3.x</th></tr></thead><tbody><tr><td>beforeCreate</td><td>移除(setup)</td></tr><tr><td>created</td><td>移除(setup)</td></tr><tr><td>beforeMount</td><td>onBeforeMount</td></tr><tr><td>mounted</td><td>onMounted</td></tr><tr><td>beforeUpdate</td><td>onBeforeUpdate</td></tr><tr><td>updated</td><td>onUpdated</td></tr><tr><td>beforeUnmounte</td><td>onBeforeUnmounte</td></tr><tr><td>unmounted</td><td>onUnmounted</td></tr><tr><td>errorCaptured</td><td>onErrorCaptured</td></tr><tr><td>renderTracked</td><td>onRenderTracked</td></tr><tr><td>renderTriggered</td><td>onRenderTriggered</td></tr></tbody></table><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">impor &#123; onMounted &#125; from &#x27;vue&#x27;;</span><br><span class="line">export default &#123;</span><br><span class="line">setup()&#123;</span><br><span class="line">onMounted(() =&gt; &#123;</span><br><span class="line">console.log(&#x27;component is mounted&#x27;)</span><br><span class="line">&#125;)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="main-js中变化-新增全局API-createApp"><a href="#main-js中变化-新增全局API-createApp" class="headerlink" title="main.js中变化 新增全局API: createApp()"></a>main.js中变化 新增全局API: createApp()</h5><p>vue2.x中采用的是new Vue()，vue3.x中使用如下方式创建应用实例</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">import &#123; createApp &#125; from &#x27;vue&#x27;;</span><br><span class="line">const app = createApp(&#123;&#125;);</span><br></pre></td></tr></table></figure><h5 id="router-js"><a href="#router-js" class="headerlink" title="router.js"></a>router.js</h5><p>vue3.x需要引入createRouter创建地址路由。createWebHashHistory对应之前的hash,createWebHistory对应之前的history。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">import &#123; createRouter, createWebHashHistory &#125; from &#x27;vue-router&#x27;;</span><br><span class="line"></span><br><span class="line">const routes = [</span><br><span class="line">&#123;</span><br><span class="line">name: &#x27;homepage&#x27;,</span><br><span class="line">path: &#x27;/homepage&#x27;,</span><br><span class="line">component: () =&gt; import(&#x27;../views/homepage/index.vue&#x27;)</span><br><span class="line">&#125;</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line">const router = createRouter(&#123;</span><br><span class="line">history: createWebHashHistory(),</span><br><span class="line">routes</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">export default router;</span><br></pre></td></tr></table></figure><h5 id="vuex"><a href="#vuex" class="headerlink" title="vuex"></a>vuex</h5><p>vue3.x中状态管理的创建方式变为了createStore，代码结构更精简合理。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">import &#123; createStore &#125; from &#x27;vuex&#x27;;</span><br><span class="line"></span><br><span class="line">export default createStore(&#123;</span><br><span class="line">state: &#123;</span><br><span class="line"></span><br><span class="line">&#125;,</span><br><span class="line">getters: &#123;</span><br><span class="line"></span><br><span class="line">&#125;,</span><br><span class="line">mutations: &#123;</span><br><span class="line"></span><br><span class="line">&#125;,</span><br><span class="line">actions: &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h5 id="应用配置"><a href="#应用配置" class="headerlink" title="应用配置"></a>应用配置</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Vue.config-&gt;app.config</span><br><span class="line"></span><br><span class="line">Vue.config.ignoredElements-&gt;app.config.ignoredElements</span><br><span class="line"></span><br><span class="line">Vue.component-&gt;app.component</span><br><span class="line"></span><br><span class="line">Vue.directive-&gt;app.directive</span><br><span class="line"></span><br><span class="line">Vue.mixin-&gt;app.mixin</span><br><span class="line"></span><br><span class="line">Vue.use-&gt;app.use</span><br></pre></td></tr></table></figure><p>config: 包含Vue应用程序全局配置的对象，在挂载应用之前配置相应的属性。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const app = Vue.createApp(&#123;&#125;);</span><br><span class="line">app.config = &#123;...&#125;</span><br></pre></td></tr></table></figure><ol><li><p>devtools（类型：Boolean，默认：false），配置是否开启vue-devtools检查，一般在开发环境是true，生产环境为false。<br>app.config.devtools = true</p></li><li><p>errorHandler（类型：function，参数err：错误内容，vm：对应的实例，info：Vue特定的错误信息，如某个生命周期中出现的错误）<br>app.config.errorHandler = (err, vm, info) =&gt; {}</p></li><li><p>warnHandler（类型：function，参数msg：警告内容，vm：对应的实例，trace：组件的层次追踪）<br>app.config.warnHandler = (msg, vm, trace) =&gt; {};</p></li><li><p>globalProperties (类型: any)用于添加到应用程序中任何组件都能使用的全局属性，当与组件内部的属性冲突时，将优先使用组件内部的属性值。可代替Vue2中的Vue .prototype.</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">// Vue2.x</span><br><span class="line">Vue.prototype.name = &#x27;zhang_san&#x27;</span><br><span class="line">// Vue3.x</span><br><span class="line">app.config.globalProperties.name = &#x27;zhang_san&#x27;</span><br><span class="line">app.component(&#x27;child-component&#x27;, &#123;</span><br><span class="line">mounted()&#123;</span><br><span class="line">console.log(this.name)</span><br><span class="line">&#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li><li><p>isCustomElement (类型: (tag: string) =&gt; boolean)，用于来识别Vue之外的自定义元素(如，三方web组件api) ，如果组件或元素符合这个条件，则组件不会被实例化，Vue也不会对组件或元素发出警告信息。<br>app.config.isCustomElement = tag =&gt; tag.startsWith(‘ion’);</p></li></ol><h5 id="挂载应用程序"><a href="#挂载应用程序" class="headerlink" title="挂载应用程序"></a>挂载应用程序</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">import &#123; createApp &#125; from &#x27;vue&#x27;;</span><br><span class="line">import App from &#x27;./App.vue&#x27;; </span><br><span class="line">const app = createApp(App);</span><br><span class="line">app.mount( #app&#x27;); </span><br></pre></td></tr></table></figure><h5 id="注册全局组件"><a href="#注册全局组件" class="headerlink" title="注册全局组件"></a>注册全局组件</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">import &#123; createApp &#125; from &#x27;vue&#x27;;</span><br><span class="line">const app = createApp(&#123;&#125;);</span><br><span class="line">// myComponent为组件实例</span><br><span class="line">app.component(&#x27;my-component, myComponent);</span><br><span class="line">//重置组件</span><br><span class="line">const MyComponent = app.component(&#x27;my-component&#x27;, &#123;&#125;);</span><br></pre></td></tr></table></figure><h5 id="新增全局注入-提取：provide-inject-父组件数据注入与子孙组件数据获取"><a href="#新增全局注入-提取：provide-inject-父组件数据注入与子孙组件数据获取" class="headerlink" title="新增全局注入/提取：provide/inject (父组件数据注入与子孙组件数据获取)"></a>新增全局注入/提取：provide/inject (父组件数据注入与子孙组件数据获取)</h5><p>参数: Object | () =&gt; Object.</p><p>概述: provide一般与inject一起使用，provide为当前实例的所有子孙组件注入数据，inject在当前实例的子孙组件中获取注入的数据。</p><p>用例：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">import &#123; createApp &#125; from &#x27;vue&#x27; ;</span><br><span class="line">//全局注入数据</span><br><span class="line">const app = createApp(&#123;</span><br><span class="line">procide: &#123;</span><br><span class="line">user: &#x27;zhang_san&#x27;</span><br><span class="line">&#125;</span><br><span class="line">&#125;);</span><br><span class="line">// 获取数据</span><br><span class="line">app.component(‘my-component&#x27;, &#123;</span><br><span class="line">inject: [ &#x27;user&#x27;],</span><br><span class="line">data() &#123;...&#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h5 id="全局方法"><a href="#全局方法" class="headerlink" title="全局方法"></a>全局方法</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">// Vue2.x</span><br><span class="line">import Vue from &#x27;vue&#x27;;</span><br><span class="line">Vue.nextTick(()=&gt;&#123; ... &#125;)</span><br><span class="line">// 或者</span><br><span class="line">export default &#123;</span><br><span class="line">...</span><br><span class="line">this.$nextTick(()=&gt;&#123; ... &#125;)</span><br><span class="line">...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// Vue3.x</span><br><span class="line">import &#123; nextTick &#125; from &#x27;vue&#x27;;</span><br><span class="line">export default &#123;</span><br><span class="line">...</span><br><span class="line">nextTick(()=&gt;&#123; ... &#125;)</span><br><span class="line">...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="自定义指令：directive"><a href="#自定义指令：directive" class="headerlink" title="自定义指令：directive"></a>自定义指令：directive</h5><p>Vue3.x中对自定义指令的创建提供了更加细致的API（类似于组件的生命周期）</p><ol><li>bind                            -&gt;    beforeMount（挂载前）</li><li>inserted                        -&gt;    mounted（挂载后）</li><li>​                                        -&gt;    beforeUpdate（新增，更新前）</li><li>update                            -&gt;    删除</li><li>componentUpdate        -&gt;    update（更新后）</li><li>​                                        -&gt;    beforeUnmounted（新增，卸载前）</li><li>unbind                            -&gt;    unmounted（卸载后）</li></ol><h5 id="跨组件通讯"><a href="#跨组件通讯" class="headerlink" title="跨组件通讯"></a>跨组件通讯</h5><p>vue2.x eventBus</p><p>Vue3.x 中全局事件总成将使用mitt来实现跨组件通讯。</p><p>使用<strong>mitt</strong>之前先安装mitt模块<strong>npm install –save mitt</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">import mitt from &#x27;mitt&#x27;</span><br><span class="line">const VueEvent = mitt()</span><br><span class="line"></span><br><span class="line">export default VueEvent;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">&lt;div&gt;</span><br><span class="line">&lt;button @click=&quot;doLogin&quot;&gt;父子组件传值&lt;/button&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import VueEvent from &#x27;../model/event&#x27;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">data()&#123;</span><br><span class="line">return &#123;&#125;</span><br><span class="line">&#125;,</span><br><span class="line">methods:&#123;</span><br><span class="line">doLogin()&#123;</span><br><span class="line">VueEvent.emit(&#x27;login&#x27;)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">用户登录组件</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import VueEvent from &#x27;../model/event&#x27;</span><br><span class="line">export default &#123;</span><br><span class="line">mounted()&#123;</span><br><span class="line">VueEvent.on(&#x27;login&#x27;,() =&gt; &#123;</span><br><span class="line">alert(&#x27;doLogin&#x27;)</span><br><span class="line">&#125;)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h5 id="Vue3-x组件自定义事件验证"><a href="#Vue3-x组件自定义事件验证" class="headerlink" title="Vue3.x组件自定义事件验证"></a>Vue3.x组件自定义事件验证</h5><p>父组件</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">&lt;div&gt;</span><br><span class="line">&lt;login @submit=&quot;getChild&quot;&gt;&lt;/login&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import Login from &quot;./Login&quot;</span><br><span class="line">export default &#123;</span><br><span class="line">data()&#123;</span><br><span class="line">return &#123;</span><br><span class="line">title: &#x27;hello vue&#x27;</span><br><span class="line">&#125;</span><br><span class="line">&#125;,</span><br><span class="line">components:&#123;</span><br><span class="line">Login</span><br><span class="line">&#125;,</span><br><span class="line">methods:&#123;</span><br><span class="line">getChild(data)&#123;</span><br><span class="line">alert(data)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>子组件</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">&lt;input type=&quot;text&quot; v-model=&quot;username&quot; /&gt;</span><br><span class="line">&lt;br&gt;</span><br><span class="line">&lt;input type=&quot;text&quot; v-model=&quot;password&quot; /&gt;</span><br><span class="line">&lt;br&gt;</span><br><span class="line"></span><br><span class="line">&lt;button @click=&quot;run&quot;&gt;通过广播方式实现子组件给父组件传值&lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">// 建议定义所有发出的事件，以便更好地记录组件应该如何工作</span><br><span class="line">emits: &#123;</span><br><span class="line">submit :(&#123;</span><br><span class="line">username,</span><br><span class="line">password</span><br><span class="line">&#125;) =&gt; &#123;</span><br><span class="line">if (username &amp;&amp; password) &#123;</span><br><span class="line">return true</span><br><span class="line">&#125; else &#123;</span><br><span class="line">console.warn(&quot;传入的参数不能为空&quot;)</span><br><span class="line">return false</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">data()&#123;</span><br><span class="line">return &#123;</span><br><span class="line">username: &#x27;张三&#x27;,</span><br><span class="line">password: &#x27;&#x27;</span><br><span class="line">&#125;</span><br><span class="line">&#125;,</span><br><span class="line">methods:&#123;</span><br><span class="line">run()&#123;</span><br><span class="line">this.$emit(&#x27;submit&#x27;,&#123;</span><br><span class="line">username: this.username,</span><br><span class="line">password: this.password</span><br><span class="line">&#125;)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vue3对比vue2 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>js函数柯里化</title>
      <link href="/hb-myblog.github.io/2021/10/12/js%E5%87%BD%E6%95%B0%E6%9F%AF%E9%87%8C%E5%8C%96/"/>
      <url>/hb-myblog.github.io/2021/10/12/js%E5%87%BD%E6%95%B0%E6%9F%AF%E9%87%8C%E5%8C%96/</url>
      
        <content type="html"><![CDATA[<p>&emsp;&emsp;函数柯里化，指的是将一个接受多个参数的函数，变为接受一个参数返回一个函数的固定形式，这样便于再次调用，例如f(1)(2)。</p><p>&emsp;&emsp;如何实现add(1)(2)(3)(4)=10</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">function add()&#123;</span><br><span class="line">// 将传入的不定参数转为数组对象</span><br><span class="line">var _args = Array.prototype.slice.call(arguments);</span><br><span class="line">var _adder = function()&#123;</span><br><span class="line">_args.push(...arguments)</span><br><span class="line">return _adder</span><br><span class="line">&#125;</span><br><span class="line">// toString隐形转换的特性</span><br><span class="line">_adder.toString = function()&#123;</span><br><span class="line">return _args.reduce((a,b) =&gt; &#123;</span><br><span class="line">return a + b</span><br><span class="line">&#125;, 0)</span><br><span class="line">&#125;</span><br><span class="line">return _adder</span><br><span class="line">&#125;</span><br><span class="line">console.log(add(1,2,3)) // 6</span><br><span class="line">console.log(add(1)(2)(3)) // 6</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> javaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> js函数柯里化 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CSS white-space 属性</title>
      <link href="/hb-myblog.github.io/2021/10/11/white-space/"/>
      <url>/hb-myblog.github.io/2021/10/11/white-space/</url>
      
        <content type="html"><![CDATA[<h5 id="兼容性："><a href="#兼容性：" class="headerlink" title="兼容性："></a>兼容性：</h5><p>&emsp;&emsp;所有浏览器都支持 white-space 属性。</p><p>&emsp;&emsp;注释：任何的版本的 Internet Explorer （包括 IE8）都不支持属性值 “inherit”。</p><h5 id="官方定义和用法："><a href="#官方定义和用法：" class="headerlink" title="官方定义和用法："></a>官方定义和用法：</h5><p>&emsp;&emsp;这个属性声明建立布局过程中如何处理元素中的空白符。值 pre-wrap 和 pre-line 是 CSS 2.1 中新增的。</p><table><thead><tr><th>值</th><th>描述</th></tr></thead><tbody><tr><td>normal</td><td>默认。空白会被浏览器忽略。</td></tr><tr><td>pre</td><td>空白会被浏览器保留。其行为方式类似 HTML 中的 <pre> 标签。</pre></td></tr><tr><td>nowrap</td><td>文本不会换行，文本会在在同一行上继续，直到遇到 <br> 标签为止。</td></tr><tr><td>pre-wrap</td><td>保留空白符序列，但是正常地进行换行。</td></tr><tr><td>pre-line</td><td>合并空白符序列，但是保留换行符。</td></tr><tr><td>inherit</td><td>规定应该从父元素继承 white-space 属性的值。</td></tr></tbody></table><h6 id="pre-line"><a href="#pre-line" class="headerlink" title="pre-line"></a>pre-line</h6><p>&emsp;&emsp;合并空格，保留换行符，允许自动换行</p><h6 id="normal"><a href="#normal" class="headerlink" title="normal"></a>normal</h6><p>&emsp;&emsp;合并空格，换行符转化为一个空格，允许自动换行</p><h6 id="nowrap"><a href="#nowrap" class="headerlink" title="nowrap"></a>nowrap</h6><p>&emsp;&emsp;合并空格，换行符转化为一个空格，不允许自动换行</p><h6 id="pre"><a href="#pre" class="headerlink" title="pre"></a>pre</h6><p>&emsp;&emsp;保留空格，保留换行符，不允许自动换行</p><h6 id="pre-wrap"><a href="#pre-wrap" class="headerlink" title="pre-wrap"></a>pre-wrap</h6><p>&emsp;&emsp;保留空格，保留换行符，允许自动换行。</p><table><thead><tr><th><strong>值</strong></th><th><strong>空白符</strong></th><th><strong>换行符</strong></th><th><strong>自动换行</strong></th></tr></thead><tbody><tr><td>pre-line</td><td>合并</td><td>保留</td><td>允许</td></tr><tr><td>normal</td><td>合并</td><td>忽略</td><td>允许</td></tr><tr><td>nowrap</td><td>合并</td><td>忽略</td><td>不允许</td></tr><tr><td>pre</td><td>保留</td><td>保留</td><td>不允许</td></tr><tr><td>pre-wrap</td><td>保留</td><td>保留</td><td>允许</td></tr></tbody></table>]]></content>
      
      
      <categories>
          
          <category> css </category>
          
      </categories>
      
      
        <tags>
            
            <tag> white-space </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>async/await详解</title>
      <link href="/hb-myblog.github.io/2021/10/09/async-await%E8%AF%A6%E8%A7%A3/"/>
      <url>/hb-myblog.github.io/2021/10/09/async-await%E8%AF%A6%E8%A7%A3/</url>
      
        <content type="html"><![CDATA[<h4 id="1、前言"><a href="#1、前言" class="headerlink" title="1、前言"></a>1、前言</h4><p>&emsp;&emsp;async函数，也就是我们常说的async/await，是在ES2017(ES8)引入的新特性，主要目的是为了简化使用基于Promise的API时所需的语法。async和await关键字让我们可以用一种更简洁的方式写出基于Promise的异步行为，而无需刻意地链式调用Promise。</p><h4 id="2、详解"><a href="#2、详解" class="headerlink" title="2、详解"></a>2、详解</h4><p>&emsp;&emsp;async表示函数里有异步操作，await表示紧跟在后面的表达式需要等待结果。需要注意的是await关键字只在async函数内有效，如果在async函数体之外使用它，会抛出语法错误。</p><h5 id="2-1、async"><a href="#2-1、async" class="headerlink" title="2.1、async"></a>2.1、async</h5><p>&emsp;&emsp;async函数返回一个 Promise对象，可以使用then方法添加回调函数。只要使用async，不管函数内部返回的是不是Promise对象，都会被包装成Promise对象。</p><ul><li>函数返回非Promise对象</li></ul><p><img src="https://s3.bmp.ovh/imgs/2021/10/70747f2e8bf92b93.jpg"></p><p>&emsp;&emsp;可以看出函数直接返回字符串时，返回的是Promise对象，相当于直接通过Promise.resolve()将字符串封装为Promise对象。如果函数没有返回值时，PromiseResult结果为undefined。</p><ul><li><h6 id="函数返回Promise对象"><a href="#函数返回Promise对象" class="headerlink" title="函数返回Promise对象"></a>函数返回Promise对象</h6></li></ul><p><img src="https://s3.bmp.ovh/imgs/2021/10/40b7d757806a77dd.jpg"></p><p>&emsp;&emsp;可以看出返回的也是Promise对象。</p><h5 id="2-2、await"><a href="#2-2、await" class="headerlink" title="2.2、await"></a>2.2、await</h5><p>&emsp;&emsp;await关键字可以跟在任意变量或者表达式之前，但通常await后面会跟一个异步过程。await使用时，会阻塞后续代码执行。我们先抛开async，单独谈await。</p><p><img src="https://s3.bmp.ovh/imgs/2021/10/27e1e9190d623cff.png"></p><p>&emsp;&emsp;可以看出，使用了await后，必须得等testAsync方法执行完后，才会执行后续代码。也可以尝试一下把testAsync前的async去掉，看看跟加上await时有啥区别。</p><h5 id="2-3、async、await结合使用"><a href="#2-3、async、await结合使用" class="headerlink" title="2.3、async、await结合使用"></a>2.3、async、await结合使用</h5><p><strong>语法：</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">async function 函数名() &#123;</span><br><span class="line">await XXX;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>示例代码：</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">function testAsync() &#123;</span><br><span class="line">return new Promise(function(resolve, reject) &#123;</span><br><span class="line">setTimeout(function() &#123;</span><br><span class="line">if (true) &#123;</span><br><span class="line">console.log(&#x27;请求中...&#x27;)</span><br><span class="line">resolve(&#x27;resolve return&#x27;)</span><br><span class="line">&#125; else &#123;</span><br><span class="line">reject(&#x27;reject return&#x27;)</span><br><span class="line">&#125;</span><br><span class="line">&#125;, 2000)</span><br><span class="line">&#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function testAsync2() &#123;</span><br><span class="line">return new Promise(function(resolve, reject) &#123;</span><br><span class="line">setTimeout(function() &#123;</span><br><span class="line">if (true) &#123;</span><br><span class="line">console.log(&#x27;请求中2...&#x27;)</span><br><span class="line">resolve(&#x27;resolve return2&#x27;)</span><br><span class="line">&#125; else &#123;</span><br><span class="line">reject(&#x27;reject return2&#x27;)</span><br><span class="line">&#125;</span><br><span class="line">&#125;, 2000)</span><br><span class="line">&#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">async function test() &#123;</span><br><span class="line">console.log(&#x27;test开始...&#x27;);</span><br><span class="line">var value1 = await testAsync();</span><br><span class="line">console.log(value1);</span><br><span class="line">var value2 = await testAsync2();</span><br><span class="line">console.log(value2);</span><br><span class="line">var value3 = await &#x27;test结束...&#x27;;</span><br><span class="line">console.log(value3);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">console.log(test());</span><br></pre></td></tr></table></figure><img src="https://s3.bmp.ovh/imgs/2021/10/6be29362930c2ac9.jpg" style="zoom:50%;"><p>&emsp;&emsp;上图可以看出遇到第一个await后，立即返回了Promise对象，然后再按顺序去执行testAsync函数，等待testAsync函数执行后再去执行testAsync2函数。还可以看出async函数可以简化Promise的语法，以往我们需要使用.then去处理回调，现在我们可以使用await像写同步代码一样去写异步代码。</p><p>&emsp;&emsp;再升级一下，在上面的基础上再加入两个普通函数：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">function fun1() &#123;</span><br><span class="line">return &#x27;函数1&#x27;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function fun2() &#123;</span><br><span class="line">return &#x27;函数2&#x27;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function fun3() &#123;</span><br><span class="line">console.log(fun1());</span><br><span class="line">console.log(test()); // async/await函数</span><br><span class="line">console.log(fun2());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"> console.log(fun3());</span><br></pre></td></tr></table></figure><img src="https://s3.bmp.ovh/imgs/2021/10/0f950b00a372fa86.jpg" style="zoom:50%;"><p>梳理一下函数的执行过程:</p><ol><li>先执行函数1</li><li>进入test函数并输出开始</li><li>在test函数中遇到await，立即返回Promise对象</li><li>执行函数2</li><li>执行test函数中的testAsync方法</li><li>等到test函数中的testAsync方法执行完后，继续执行testAsync2方法</li><li>test函数结束</li></ol><p>&emsp;&emsp;可以看出，async函数在遇到await后会立即返回Promise对象，继续执行async函数外部后续逻辑，async函数内部会被await阻塞并按顺序执行代码逻辑。</p><h5 id="2-4、async、await异常处理"><a href="#2-4、async、await异常处理" class="headerlink" title="2.4、async、await异常处理"></a>2.4、async、await异常处理</h5><p>&emsp;&emsp;await后面的函数是有可能出现异常的，所以最好把await命令放在try…catch代码块中。如果await后是Promise对象，也可以使用.catch进行捕获。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">// 第一种写法</span><br><span class="line">async function myFunction() &#123;</span><br><span class="line">  try &#123;</span><br><span class="line">    await something();</span><br><span class="line">  &#125; catch (err) &#123;</span><br><span class="line">    console.log(err);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 第二种写法</span><br><span class="line">async function myFunction() &#123;</span><br><span class="line">  await somethingPromise()</span><br><span class="line">  .catch(function (err) &#123;</span><br><span class="line">    console.log(err);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="3、总结"><a href="#3、总结" class="headerlink" title="3、总结"></a>3、总结</h4><p>&emsp;&emsp;async函数在遇到await后会立即返回Promise对象，继续执行async函数外部逻辑，async函数内部会被await阻塞并按顺序执行代码逻辑。</p><p>&emsp;&emsp;可以使用try…catch或.catch对async函数进行异常处理。</p>]]></content>
      
      
      <categories>
          
          <category> javaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> async/await </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>vue基础</title>
      <link href="/hb-myblog.github.io/2021/10/08/vue%E5%9F%BA%E7%A1%80/"/>
      <url>/hb-myblog.github.io/2021/10/08/vue%E5%9F%BA%E7%A1%80/</url>
      
        <content type="html"><![CDATA[<h5 id="Setter"><a href="#Setter" class="headerlink" title="Setter"></a>Setter</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">var vm = new Vue(&#123;</span><br><span class="line"> el: &#x27;#el&#x27;,</span><br><span class="line"> data: &#123;</span><br><span class="line">  num: 100,</span><br><span class="line"> &#125;</span><br><span class="line"> computed: &#123;</span><br><span class="line">  price: &#123;</span><br><span class="line">   set: function(newValue)&#123;</span><br><span class="line">    this.num = newValue * 100;</span><br><span class="line">   &#125;,</span><br><span class="line">   get: function() &#123;</span><br><span class="line">    return (this.num/100).toFixed(2);</span><br><span class="line">   &#125;</span><br><span class="line">  &#125;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h5 id="绑定value"><a href="#绑定value" class="headerlink" title="绑定value"></a>绑定value</h5><p>表单控件的值可以绑定在vue实例的动态属性上</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;input type=&quot;checkbox&quot; v-model=&quot;checked&quot; v-bind:true-value=&quot;a&quot; v-bind:false-value=&quot;b&quot;&gt;</span><br><span class="line"></span><br><span class="line">// 选中：vm.checked==vm.a</span><br><span class="line"></span><br><span class="line">// 未选中：vm.hchecked==vm.b</span><br></pre></td></tr></table></figure><h5 id="内联样式绑定"><a href="#内联样式绑定" class="headerlink" title="内联样式绑定"></a>内联样式绑定</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;div v-bind:style=&quot;dada&quot;&gt;&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">data: &#123;</span><br><span class="line"> dada: &#123;</span><br><span class="line">  color: &#x27;green&#x27;,</span><br><span class="line">  fontSize: &#x27;10px&#x27;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>数组语法：v-bind:style允许将多个样式对象绑定到统一元素上。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;div v-bind:style=&quot;[ styleObjectA, styleObjectB ]&quot;&gt;&lt;/div&gt;</span><br></pre></td></tr></table></figure><h5 id="列表渲染"><a href="#列表渲染" class="headerlink" title="列表渲染"></a>列表渲染</h5><p>v-for 内置了 $index 变量，输出当前数组元素的索引，也可以自己指定索引的别名。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;li v-for=&quot;(index,item) in items&quot;&gt;&#123;&#123;index&#125;&#125; – &#123;&#123;$index&#125;&#125; – &#123;&#123;item.title&#125;&#125;&lt;/li&gt;</span><br></pre></td></tr></table></figure><p>在vue.js中提供了$set方法，修改数据的同时进行试图更新。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">this.$set(&#x27;item[0]&#x27;, &#123;title: &#x27;da&#x27;&#125;)</span><br><span class="line"></span><br><span class="line">this.$set( target, key, value )</span><br></pre></td></tr></table></figure><h5 id="内置指令"><a href="#内置指令" class="headerlink" title="内置指令"></a>内置指令</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">v-pre指令，表示跳过编译这个元素和子元素，显示原始的&#123;&#123;&#125;&#125;Mustache标签，用来减少编译时间</span><br></pre></td></tr></table></figure><h5 id="v-for-中使用-key"><a href="#v-for-中使用-key" class="headerlink" title="v-for 中使用 key"></a>v-for 中使用 key</h5><p>​        使用 v-for 更新已渲染的元素列表时，默认用就地复用策略；列表数据修改的时候，他会根据 key 值去判断某个值是否修改，如果修改，则重新渲染这一项，否则复用之前的元素；</p><p>​        使用key的注意事项：</p><ul><li>不要使用可能重复的或者可能变化 key 值（控制台也会给出提醒）</li><li>不要使用数组的 index 作为 key 值，因为如果在数组中插入一个元素时，其后面的元素 index 将会变化。</li><li>如果数组中没有唯一的 key 值可用，可以考虑对其添加一个 key 字段，值为 Symbol() 即可保证唯一。</li></ul><h5 id="v-if-v-else-if-v-else-中使用-key"><a href="#v-if-v-else-if-v-else-中使用-key" class="headerlink" title="v-if/v-else-if/v-else 中使用 key"></a>v-if/v-else-if/v-else 中使用 key</h5><blockquote><p>可能很多人都会忽略这个点</p></blockquote><p>​        原因：默认情况下，Vue 会尽可能高效的更新 DOM。这意味着其在相同类型的元素之间切换时，会修补已存在的元素，而不是将旧的元素移除然后在同一位置添加一个新元素。如果本不相同的元素被识别为相同，则会出现意料之外的副作用。</p><blockquote><p>如果只有一个 v-if ，没有 v-else 或者 v-if-else的话，就没有必要加 key 了</p></blockquote><p>​        相对于 v-for 的 key， v-if/v-else-if/v-else 中的 key 相对简单，我们可以直接写入固定的字符串或者数组即可</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;transition&gt;</span><br><span class="line">  &lt;button </span><br><span class="line">    v-if=&quot;isEditing&quot;</span><br><span class="line">    v-on:click=&quot;isEditing = false&quot;</span><br><span class="line">  &gt;</span><br><span class="line">    Save</span><br><span class="line">  &lt;/button&gt;</span><br><span class="line">  &lt;button </span><br><span class="line">    v-else </span><br><span class="line">    v-on:click=&quot;isEditing = true&quot;</span><br><span class="line">  &gt;</span><br><span class="line">    Edit</span><br><span class="line">  &lt;/button&gt;</span><br><span class="line">&lt;/transition&gt;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">.v-enter-active, .v-leave-active &#123;</span><br><span class="line">  transition: all 1s;</span><br><span class="line">&#125;</span><br><span class="line">.v-enter, .v-leave-to &#123;</span><br><span class="line">  opacity: 0;</span><br><span class="line">  transform: translateY(30px);</span><br><span class="line">&#125;</span><br><span class="line">.v-leave-active &#123;</span><br><span class="line">  position: absolute;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>​        例如对于上面的代码， 你会发现虽然对 button 添加了 过渡效果， 但是如果不添加 key 切换时是无法触发过渡的</p><h5 id="v-for-和-v-if-不要一起使用"><a href="#v-for-和-v-if-不要一起使用" class="headerlink" title="v-for 和 v-if 不要一起使用"></a>v-for 和 v-if 不要一起使用</h5><blockquote><p>此优化技巧仅限于Vue2，Vue3 中对 v-for 和 v-if 的优先级做了调整</p><p><strong>永远不要把 v-if 和 v-for 同时用在同一个元素上。</strong></p></blockquote><p>​        原因是 v-for 的 优先级高于 v-if，所以当它们使用再同一个标签上时，每一个渲染都会先循环再进行条件判断</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;ul&gt;</span><br><span class="line">  &lt;li v-for=&quot;user in users&quot; v-if=&quot;user.active&quot;&gt;</span><br><span class="line">    &#123;&#123; user.name &#125;&#125;</span><br><span class="line">  &lt;/li&gt;</span><br><span class="line">&lt;/ul&gt;</span><br></pre></td></tr></table></figure><p>​        我们应该尽量将 v-if 移动到上级 或者 使用 计算属性来处理数据</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;ul v-if=&quot;active&quot;&gt;</span><br><span class="line">  &lt;li v-for=&quot;user in users&quot;&gt;</span><br><span class="line">    &#123;&#123; user.name &#125;&#125;</span><br><span class="line">  &lt;/li&gt;</span><br><span class="line">&lt;/ul&gt;</span><br></pre></td></tr></table></figure><p>​        如果你不想让循环的内容多出一个无需有的上级容器，那么你可以选择使用 template 来作为其父元素，template 不会被浏览器渲染为 DOM 节点</p><p>​        如果我想要判断遍历对象里面每一项的内容来选择渲染的数据的话，可以使用 computed 来对遍历对象进行过滤</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">// js</span><br><span class="line">let usersActive = computed(()=&gt;users.filter(user =&gt; user.active))</span><br><span class="line"></span><br><span class="line">// template</span><br><span class="line">&lt;ul&gt;</span><br><span class="line">    &lt;li v-for=&quot;user in usersActive&quot;&gt;</span><br><span class="line">      &#123;&#123; user.name &#125;&#125;</span><br><span class="line">    &lt;/li&gt;</span><br><span class="line">&lt;/ul&gt;</span><br></pre></td></tr></table></figure><h5 id="使用简单的-计算属性"><a href="#使用简单的-计算属性" class="headerlink" title="使用简单的 计算属性"></a>使用简单的 计算属性</h5><p>​        computed 大家后很熟悉， 它会在其表达式中依赖的响应式数据发送变化时重新计算。如果我们在一个计算属性中书写了比较复杂的表达式，那么其依赖的响应式数据也任意变得更多。当其中任何一个依赖项变化时整个表达式都需要重新计算</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">let price = computed(()=&gt;&#123;</span><br><span class="line">  let basePrice = manufactureCost / (1 - profitMargin)</span><br><span class="line">  return (</span><br><span class="line">      basePrice -</span><br><span class="line">      basePrice * (discountPercent || 0)</span><br><span class="line">  )</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>​        当 manufactureCost、profitMargin、discountPercent 中任何一个变化时都会重新计算整个 price。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">let basePrice = computed(() =&gt; manufactureCost / (1 - profitMargin))</span><br><span class="line">let discount = computed(() =&gt; basePrice * (discountPercent || 0))</span><br><span class="line">let finalPrice = computed(() =&gt; basePrice - discount)</span><br></pre></td></tr></table></figure><p>​        如果当 discountPercent 变化时，只会 重新计算 discount 和 finalPrice，由于 computed 的缓存特性，不会重新计算 basePrice</p><h5 id="functional-函数式组件（Vue2）"><a href="#functional-函数式组件（Vue2）" class="headerlink" title="functional 函数式组件（Vue2）"></a>functional 函数式组件<strong>（Vue2）</strong></h5><p>优化前</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt; </span><br><span class="line">    &lt;div class=&quot;cell&quot;&gt; </span><br><span class="line">        &lt;div v-if=&quot;value&quot; class=&quot;on&quot;&gt;&lt;/div&gt; </span><br><span class="line">        &lt;section v-else class=&quot;off&quot;&gt;&lt;/section&gt; </span><br><span class="line">    &lt;/div&gt; </span><br><span class="line">&lt;/template&gt; </span><br><span class="line"></span><br><span class="line">&lt;script&gt; </span><br><span class="line">export default &#123; </span><br><span class="line">    props: [&#x27;value&#x27;], </span><br><span class="line">&#125; </span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>优化后</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;template functional&gt; </span><br><span class="line">    &lt;div class=&quot;cell&quot;&gt; </span><br><span class="line">        &lt;div v-if=&quot;props.value&quot; class=&quot;on&quot;&gt;&lt;/div&gt; </span><br><span class="line">        &lt;section v-else class=&quot;off&quot;&gt;&lt;/section&gt; </span><br><span class="line">    &lt;/div&gt; </span><br><span class="line">&lt;/template&gt; </span><br><span class="line"></span><br><span class="line">&lt;script&gt; </span><br><span class="line">export default &#123; </span><br><span class="line">    props: [&#x27;value&#x27;], </span><br><span class="line">&#125; </span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><ul><li>没有this（没有实例）</li><li>没有响应式数据</li></ul><h5 id="采用合理的数据处理算法"><a href="#采用合理的数据处理算法" class="headerlink" title="采用合理的数据处理算法"></a>采用合理的数据处理算法</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * 数组转树形结构,时间复杂度O(n)</span><br><span class="line"> * @param list 数组</span><br><span class="line"> * @param idKey 元素id键</span><br><span class="line"> * @param parIdKey 元素父id键</span><br><span class="line"> * @param parId 第一级根节点的父id值</span><br><span class="line"> * @return &#123;[]&#125;</span><br><span class="line"> */</span><br><span class="line"> function listToTree (list,idKey,parIdKey,parId) &#123;</span><br><span class="line">    let map = &#123;&#125;;</span><br><span class="line">    let result = [];</span><br><span class="line">    let len = list.length;</span><br><span class="line"></span><br><span class="line">    // 构建map</span><br><span class="line">    for (let i = 0; i &lt; len; i++) &#123;</span><br><span class="line">        //将数组中数据转为键值对结构 (这里的数组和obj会相互引用，这是算法实现的重点)</span><br><span class="line">        map[list[i][idKey]] = list[i];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // 构建树形数组</span><br><span class="line">    for(let i=0; i &lt; len; i++) &#123;</span><br><span class="line">        let itemParId = list[i][parIdKey];</span><br><span class="line">        // 顶级节点</span><br><span class="line">        if(itemParId === parId) &#123;</span><br><span class="line">            result.push(list[i]);</span><br><span class="line">            continue;</span><br><span class="line">        &#125;</span><br><span class="line">        // 孤儿节点，舍弃(不存在其父节点)</span><br><span class="line">        if(!map[itemParId])&#123;</span><br><span class="line">            continue;</span><br><span class="line">        &#125;</span><br><span class="line">        // 将当前节点插入到父节点的children中（由于是引用数据类型，obj中对于节点变化，result中对应节点会跟着变化）</span><br><span class="line">        if(map[itemParId].children) &#123;</span><br><span class="line">            map[itemParId].children.push(list[i]);</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            map[itemParId].children = [list[i]];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    return result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vue基础 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>git版本回退</title>
      <link href="/hb-myblog.github.io/2021/10/07/git%E7%89%88%E6%9C%AC%E5%9B%9E%E9%80%80/"/>
      <url>/hb-myblog.github.io/2021/10/07/git%E7%89%88%E6%9C%AC%E5%9B%9E%E9%80%80/</url>
      
        <content type="html"><![CDATA[<p>对于git版本的回退，我们一般会用到如下两个命令：</p><ul><li>git reset</li><li>git revert</li></ul><p>这两个命令有什么区别呢？</p><h5 id="1、git-reset"><a href="#1、git-reset" class="headerlink" title="1、git reset"></a>1、git reset</h5><p>假设有如下几个提交:</p><p><img src="https://i.bmp.ovh/imgs/2021/10/acf69ed2c12427dd.png"></p><p>执行如下命令</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git reset --hard a0fvf8</span><br></pre></td></tr></table></figure><p>命令执行之后，HEAD指针就会移动到B提交下</p><p><img src="https://i.bmp.ovh/imgs/2021/10/fc6aaccc7c536e28.png"></p><p>此时，远程仓库的指针依然在D提交上。直接push的话，无法将更改推送到远程仓库，只能使用-f强推到远程仓库：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git push -f</span><br></pre></td></tr></table></figure><p>这个方法的弊端显而易见，之前的C、D提交将会被抹除，无法再找回了。</p><h5 id="2、git-revert"><a href="#2、git-revert" class="headerlink" title="2、git revert"></a>2、git revert</h5><p>通过反做创建一个新的版本，新版本的内容与要回退的目标版本一样，而HEAD指针指向新生成的版本。</p><p>用git revert 来实现上述例子的话可以先revert D，再revert C（由新到旧依次revert）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git revert 5lk4er</span><br><span class="line">git revert 76sdeb</span><br></pre></td></tr></table></figure><p><img src="https://i.bmp.ovh/imgs/2021/10/9acffeb81c1085a5.png"></p><p>如果回退的数量较大，一个个回退容易出错，可以使用以下方法进行批量回退</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git revert OLDER_COMMIT^..NEWER_COMMIT</span><br></pre></td></tr></table></figure><p>这样操作的话HEAD指针是往后移动的，可以直接push到远程仓库中。将来甩锅便有迹可循</p>]]></content>
      
      
      <categories>
          
          <category> git </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>CSS3阴影(box-shadow)</title>
      <link href="/hb-myblog.github.io/2021/10/06/CSS3%E9%98%B4%E5%BD%B1-box-shadow/"/>
      <url>/hb-myblog.github.io/2021/10/06/CSS3%E9%98%B4%E5%BD%B1-box-shadow/</url>
      
        <content type="html"><![CDATA[<h5 id="1、单侧投影"><a href="#1、单侧投影" class="headerlink" title="1、单侧投影"></a>1、单侧投影</h5><ul><li><p>外 box-shadow 前四个参数：x 偏移值、y 偏移值 、模糊半径、扩张半径。 </p></li><li><p>单侧投影的核心是第四个参数：扩张半径。这个参数会根据你指定的值去扩大或缩小投影尺寸，如果我们用一个负的扩张半径，而他的值刚好等于模糊半径，那么投影的尺寸就会与投影所属的元素尺寸完全一致，除非使用偏移量来移动他，否则我们将看不到任何投影。</p></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;style&gt;</span><br><span class="line">.left &#123;</span><br><span class="line"> box-shadow: -8px 0 5px -5px #333;</span><br><span class="line">&#125;</span><br><span class="line">.right &#123;</span><br><span class="line"> box-shadow: 8px 0 5px -5px #333;</span><br><span class="line">&#125;</span><br><span class="line">.top &#123;</span><br><span class="line"> box-shadow: 0 -8px 5px -5px #333;</span><br><span class="line">&#125;</span><br><span class="line">.bottom &#123;</span><br><span class="line"> box-shadow: 0 8px 5px -5px #333;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line">&lt;div class=&#x27;left&#x27;&gt;左&lt;/div&gt;</span><br><span class="line">&lt;div class=&#x27;right&#x27;&gt;右&lt;/div&gt;</span><br><span class="line">&lt;div class=&#x27;top&#x27;&gt;上&lt;/div&gt;</span><br><span class="line">&lt;div class=&#x27;bottom&#x27;&gt;下&lt;/div&gt;</span><br></pre></td></tr></table></figure><p><img src="https://s3.bmp.ovh/imgs/2021/10/990e7064af72aa94.png"></p><h5 id="2、立体文字阴影"><a href="#2、立体文字阴影" class="headerlink" title="2、立体文字阴影"></a>2、立体文字阴影</h5><ul><li>立体文字阴影的关键点在于多层 text-shadow 的叠加</li><li>合理运用了 SASS 函数来自动计算多层 text-shadow 的 CSS 代码</li><li>运用了 Sass 的颜色函数，渐进实现层级阴影颜色 - fade-out: 改变颜色的透明度，让颜色更加透明 - desaturate: 改变颜色的饱和度值，让颜色更少的饱和</li><li>HSL(颜色值)</li><li><ul><li>H：Hue(色调)。0(或360)表示红色，120表示绿色，240表示蓝色，也可取其他数值来指定颜色。取值为：0 - 360</li><li>S：Saturation(饱和度)。取值为：0.0% - 100.0%</li><li>L：Lightness(亮度)。取值为：0.0% - 100.0%</li></ul></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;style&gt;</span><br><span class="line">@function blessing($color) &#123;</span><br><span class="line"> $val: 0px 0px $color;</span><br><span class="line"> @for $i from 1 through 50 &#123;</span><br><span class="line"> $color: fade-out(desaturate($color, 1%), .02);</span><br><span class="line"> $val: #&#123;$val&#125;, -#&#123;$i&#125;px #&#123;$i&#125;px #&#123;$color&#125;;</span><br><span class="line"> &#125;</span><br><span class="line"> @return $val;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">div &#123;</span><br><span class="line"> text-align: center;</span><br><span class="line"> font-size: 20vmin;</span><br><span class="line"> line-height: 45vh;</span><br><span class="line"> text-shadow: blessing(hsl(0, 100%, 50%));</span><br><span class="line"> color: hsl(14, 100%, 60%);</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line">&lt;div&gt;福&lt;/div&gt;</span><br></pre></td></tr></table></figure><p><img src="https://s3.bmp.ovh/imgs/2021/10/d8c04e272d3e7109.png"></p><h5 id="3、线性渐变模拟长阴影"><a href="#3、线性渐变模拟长阴影" class="headerlink" title="3、线性渐变模拟长阴影"></a>3、线性渐变模拟长阴影</h5><ul><li>借用了元素的两个伪元素</li><li>通过渐变色填充两个伪元素，再通过位移、变换放置在合适的位置</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">&lt;style&gt;</span><br><span class="line">div &#123;</span><br><span class="line"> position: relative;</span><br><span class="line"> width: 30vmin;</span><br><span class="line"> height: 30vmin;</span><br><span class="line"> line-height: 30vh;</span><br><span class="line"> text-align: center;</span><br><span class="line"> font-size: 30px;</span><br><span class="line"> background: #fff;</span><br><span class="line"> margin: 30vmin auto;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">div::before,</span><br><span class="line">div::after &#123;</span><br><span class="line"> content: &quot;&quot;;</span><br><span class="line"> position: absolute;</span><br><span class="line"> top: 0;</span><br><span class="line"> left: 0;</span><br><span class="line"> right: 0;</span><br><span class="line"> bottom: 0;</span><br><span class="line"> z-index: -1;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">div::before &#123;</span><br><span class="line"> content: &#x27;:before&#x27;;</span><br><span class="line"> font-size: 30px;</span><br><span class="line"> text-align: center;</span><br><span class="line"> line-height: 30vh;</span><br><span class="line"> transform-origin: 0 50%;</span><br><span class="line"> transform: translate(100%, 0) skewY(45deg) scaleX(.6);</span><br><span class="line"> background: linear-gradient(90deg, rgba(0, 0, 0, .3), transparent);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">div::after &#123;</span><br><span class="line"> content: &#x27;:after&#x27;;</span><br><span class="line"> font-size: 30px;</span><br><span class="line"> text-align: center;</span><br><span class="line"> line-height: 30vh;</span><br><span class="line"> transform-origin: 0 0;</span><br><span class="line"> transform: translate(0%, 100%) skewX(45deg) scaleY(.6);</span><br><span class="line"> background: linear-gradient(180deg, rgba(0, 0, 0, .3), transparent);</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line">&lt;div&gt;Web秀&lt;/div&gt;</span><br></pre></td></tr></table></figure><p><img src="https://s3.bmp.ovh/imgs/2021/10/ca90721fe4663ef1.png"></p><h5 id="4、渐变实现内切角"><a href="#4、渐变实现内切角" class="headerlink" title="4、渐变实现内切角"></a>4、渐变实现内切角</h5><ul><li>阴影实现的关键点在于使用伪元素绝对定位在容器的一角，元素本身透明，阴影扩散开形成内切圆角效果</li><li>阴影实现缺点，单个标签最多只能是2个内切圆角</li><li>径向渐变实现内切圆角可以是4边</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line">&lt;style&gt;</span><br><span class="line">div &#123;</span><br><span class="line"> position: relative;</span><br><span class="line"> width: 20vw;</span><br><span class="line"> height: 8vw;</span><br><span class="line"> margin: 1vw auto;</span><br><span class="line"> border-radius: 1vmin;</span><br><span class="line"> overflow: hidden;</span><br><span class="line"> line-height: 8vw;</span><br><span class="line"> color: #fff;</span><br><span class="line"> text-align: center;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.shadow::before &#123;</span><br><span class="line"> position: absolute;</span><br><span class="line"> content: &quot;&quot;;</span><br><span class="line"> top: -2vw;</span><br><span class="line"> left: -2vw;</span><br><span class="line"> width: 4vw;</span><br><span class="line"> height: 4vw;</span><br><span class="line"> border-radius: 50%;</span><br><span class="line"> box-shadow: 0 0 0 15vw #e91e63; </span><br><span class="line"> z-index: -1;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.shadow::after &#123;</span><br><span class="line"> position: absolute;</span><br><span class="line"> content: &quot;&quot;;</span><br><span class="line"> bottom: -2vw;</span><br><span class="line"> right: -2vw;</span><br><span class="line"> width: 4vw;</span><br><span class="line"> height: 4vw;</span><br><span class="line"> border-radius: 50%;</span><br><span class="line"> box-shadow: 0 0 0 15vw #e91e63; </span><br><span class="line"> z-index: -1;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.linear &#123;</span><br><span class="line"> background-size: 70% 70%;</span><br><span class="line"> background-image: </span><br><span class="line"> radial-gradient(</span><br><span class="line"> circle at 100% 100%, </span><br><span class="line"> transparent 1vw, </span><br><span class="line"> transparent 2vw, </span><br><span class="line"> #03A9F5 2vw),</span><br><span class="line"> radial-gradient(</span><br><span class="line"> circle at 0 0, </span><br><span class="line"> transparent 0, </span><br><span class="line"> transparent 2vw, </span><br><span class="line"> #03A9F5 2vw),</span><br><span class="line"> radial-gradient(</span><br><span class="line"> circle at 100% 0, </span><br><span class="line"> transparent 0, </span><br><span class="line"> transparent 2vw, </span><br><span class="line"> #03A9F5 2vw),</span><br><span class="line"> radial-gradient(</span><br><span class="line"> circle at 0 100%, </span><br><span class="line"> transparent 0, </span><br><span class="line"> transparent 2vw, </span><br><span class="line"> #03A9F5 2vw);</span><br><span class="line"> background-repeat: no-repeat;</span><br><span class="line"> background-position: </span><br><span class="line"> right bottom, </span><br><span class="line"> left top, </span><br><span class="line"> right top, </span><br><span class="line"> left bottom;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line">&lt;div class=&quot;shadow&quot;&gt;阴影实现缺点最多是2边&lt;/div&gt;</span><br><span class="line">&lt;div class=&quot;linear&quot;&gt;径向渐变内切圆角4边&lt;/div&gt;</span><br></pre></td></tr></table></figure><p><img src="https://s3.bmp.ovh/imgs/2021/10/f96a46e2de9e4910.png"></p>]]></content>
      
      
      <categories>
          
          <category> css </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>js中一些好用的数组方法</title>
      <link href="/hb-myblog.github.io/2021/10/04/js%E4%B8%AD%E4%B8%80%E4%BA%9B%E5%A5%BD%E7%94%A8%E7%9A%84%E6%95%B0%E7%BB%84%E6%96%B9%E6%B3%95/"/>
      <url>/hb-myblog.github.io/2021/10/04/js%E4%B8%AD%E4%B8%80%E4%BA%9B%E5%A5%BD%E7%94%A8%E7%9A%84%E6%95%B0%E7%BB%84%E6%96%B9%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<h5 id="1、some"><a href="#1、some" class="headerlink" title="1、some()"></a>1、some()</h5><p><strong>语法：</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">array.some(function(currentValue,index,arr),thisValue)</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">//把10修改成20</span><br><span class="line">var ages = [5, 32, 7, 10, 33, 12, 40];</span><br><span class="line">ages.some(function (currentValue, index) &#123;</span><br><span class="line">  if (currentValue === 10) &#123;</span><br><span class="line">    ages[index] = 20</span><br><span class="line">    return true</span><br><span class="line">  &#125;</span><br><span class="line">  console.log(index);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">console.log(ages);</span><br><span class="line"></span><br><span class="line">//把10修改成20 箭头函数</span><br><span class="line">var ages = [5, 32, 7, 10, 33, 12, 40];</span><br><span class="line">ages.some((item, index) =&gt; &#123;</span><br><span class="line">  if (item === 10) &#123;</span><br><span class="line">    ages[index] = 20</span><br><span class="line">    return true</span><br><span class="line">  &#125;</span><br><span class="line">  console.log(index);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">console.log(ages);</span><br></pre></td></tr></table></figure><h5 id="2、every"><a href="#2、every" class="headerlink" title="2、every()"></a>2、every()</h5><p><strong>语法：</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">array.every(function(currentValue,index,arr), thisValue)</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">//判断每个元素的值是否都大于4</span><br><span class="line">var ages = [5, 32, 7, 10, 33, 12, 40];</span><br><span class="line"></span><br><span class="line">var res = ages.some(function (currentValue) &#123;</span><br><span class="line">  return currentValue &gt; 4</span><br><span class="line">&#125;)</span><br><span class="line">console.log(res);</span><br><span class="line">//输出：true</span><br><span class="line"></span><br><span class="line">//箭头函数</span><br><span class="line">var res = ages.some(item =&gt; item &gt; 4)</span><br><span class="line">console.log(res);</span><br><span class="line">//-------------------------</span><br><span class="line">var arr = [ 1, 2, 3, 4, 5, 6 ]; </span><br><span class="line"></span><br><span class="line">var every = arr.every( function( val, index, arr)&#123;</span><br><span class="line">    console.log( &#x27;val：&#x27; + val); //打印1，不会打印2、3、4、5、6</span><br><span class="line"></span><br><span class="line">    return val &gt; 4; </span><br><span class="line">&#125;); </span><br><span class="line"></span><br><span class="line">console.log(every); //返回false</span><br></pre></td></tr></table></figure><h5 id="3、reduce"><a href="#3、reduce" class="headerlink" title="3、reduce()"></a>3、reduce()</h5><p><strong>语法：</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">array.reduce(function(total, currentValue, currentIndex, arr), initialValue)</span><br><span class="line">total：必需。初始值, 或者计算结束后的返回值。</span><br><span class="line">currentValue：必需。当前元素</span><br><span class="line">currentIndex：可选。当前元素的索引</span><br><span class="line">arr：可选。当前元素所属的数组对象。</span><br><span class="line">initialValue：可选。传递给函数的初始值</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">//计算所有元素的和</span><br><span class="line">var numbers = [15.5, 2.3, 1.1, 4.7];</span><br><span class="line">var res = numbers.reduce(function (total, currentValue) &#123;</span><br><span class="line">  return total += currentValue</span><br><span class="line">&#125;, 0)</span><br><span class="line"></span><br><span class="line">console.log(res);</span><br><span class="line">//23.6</span><br><span class="line"></span><br><span class="line">//计算大于4的元素的和</span><br><span class="line">var result = numbers.filter(item =&gt; item &gt; 4).reduce((total, item) =&gt; total += item, 0)</span><br><span class="line">console.log(result);</span><br><span class="line">//20.2</span><br></pre></td></tr></table></figure><h5 id="4、includes"><a href="#4、includes" class="headerlink" title="4、includes()"></a>4、includes()</h5><p><strong>语法：</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">arr.includes(searchElement)</span><br><span class="line">arr.includes(searchElement, fromIndex)</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[1, 2, 3].includes(2);     // true</span><br><span class="line">[1, 2, 3].includes(4);     // false</span><br><span class="line">[1, 2, 3].includes(3, 3);  // false</span><br><span class="line">[1, 2, 3].includes(3, -1); // true</span><br><span class="line">[1, 2, NaN].includes(NaN); // true</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> javaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 数组方法 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>webSocket</title>
      <link href="/hb-myblog.github.io/2021/10/04/webSocket/"/>
      <url>/hb-myblog.github.io/2021/10/04/webSocket/</url>
      
        <content type="html"><![CDATA[<h5 id="websocket是什么"><a href="#websocket是什么" class="headerlink" title="websocket是什么"></a>websocket是什么</h5><p>&emsp;&emsp;服务器给客户端发送一个主动的消息技术。比如登录一个网页，在我们打开一个浏览器，在浏览器去请求一个网页的时候，会请求一个二维码，放到浏览器端，用手机微信去扫描的时候，微信手机端会把扫描的结果推送到微信的服务器，微信的服务器会将消息推送到第三方的另一个服务器，地三方服务器会主动推送一条消息到浏览器前端，第三方服务器主动推送消息的地方用到的技术就是websocket，也就是由服务器主动推送消息到浏览器，这就是websocket。</p><p>&emsp;&emsp;这个时候有一个疑惑，为什么不使用http呢？http首先带有协议头和协议body，协议头比较大，如果只推送几个字节或十几个字节的情况下，会产生大量的response，大部分都是无用的消息，利用率不高。又为什么不用裸TCP呢？TCP是一个传输层的协议，对于使用浏览器的版本和其他的版本，并没有做到协议上的鉴定，不能跟http一起。</p><h5 id="工作方式"><a href="#工作方式" class="headerlink" title="工作方式"></a>工作方式</h5><p>&emsp;&emsp;广播和收听</p><img src="https://i.bmp.ovh/imgs/2021/10/45f75f823c203613.png" style="zoom: 67%;"><h5 id="为什么需要websocket协议"><a href="#为什么需要websocket协议" class="headerlink" title="为什么需要websocket协议"></a>为什么需要websocket协议</h5><p>　　因为 HTTP 协议有一个缺陷：通信只能先由客户端发起，然后服务器再作出响应，并不能由服务器主动向客户端推送消息。<br>　　WebSocket 协议最大的特点是，服务器可以主动向客户端推送信息，客户端也可以主动向服务器发送信息。</p><h5 id="什么场景下用websocket"><a href="#什么场景下用websocket" class="headerlink" title="什么场景下用websocket"></a>什么场景下用websocket</h5><ol><li>websocket社交订阅</li><li>websocket多玩家游戏</li><li>websocket协同编辑/编程</li><li>websocket收集点击流数据</li><li>股票基金报价</li><li>体育实况更新</li><li>多媒体聊天</li><li>基于位置的应用</li><li>在线教育</li><li>论坛的消息广播</li><li>弹幕、客服等等</li></ol><h5 id="怎么使用websocket"><a href="#怎么使用websocket" class="headerlink" title="怎么使用websocket"></a>怎么使用websocket</h5><p>服务器端：略</p><p>客户端：浏览器原生对象websocket（功能较少）、第三方 socket.io</p><ol><li>启动服务器</li><li>启动客户端程序连接服务器（<strong>永久</strong>连接）</li><li>服务器为每个客户创建专用对象（负责当前客户消息的收发）</li><li>客户端可以向服务器发消息、服务器向所有客户发送广播消息（每个客户接收消息）</li></ol><p><strong>客户端</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">&lt;div class=&quot;btn&quot;&gt;</span><br><span class="line">    &lt;input type=&quot;button&quot; value=&quot;清空&quot; onclick=&quot;reset()&quot;/&gt;</span><br><span class="line">    &lt;input type=&quot;button&quot; value=&quot;发送&quot; onclick=&quot;send()&quot;&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">var socket = new WebSocket(&#x27;ws://127.0.0.1:80/websocket/ws&#x27;); </span><br><span class="line"></span><br><span class="line">//创建Socket </span><br><span class="line">socket.onopen = function(event) &#123; </span><br><span class="line"></span><br><span class="line">    //向服务器发送数据</span><br><span class="line">    //socket.send(&#x27;哈哈哈哈&#x27;); </span><br><span class="line"></span><br><span class="line">    //接收数据事件</span><br><span class="line">    socket.onmessage = function(event) &#123;</span><br><span class="line">    body.innerHTML+=&quot;&lt;br/&gt;对方：&quot;+event.data;</span><br><span class="line">    &#125;; </span><br><span class="line"></span><br><span class="line">    // socket关闭事件</span><br><span class="line">    socket.onclose = function(event) &#123;</span><br><span class="line">    body.innerHTML+=&quot;&lt;br/&gt;系统：已和服务器断开连接！！！&quot;;</span><br><span class="line">    &#125;; </span><br><span class="line"></span><br><span class="line">    //关闭socket</span><br><span class="line">    //socket.close()</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">//-----------</span><br><span class="line">var body=document.getElementById(&quot;body&quot;);</span><br><span class="line">function send()&#123;</span><br><span class="line">    var msg=document.getElementById(&quot;content&quot;).value;//获取输入框内容</span><br><span class="line">    socket.send(msg);//发送消息</span><br><span class="line">    reset();//清空输入框</span><br><span class="line">    body.innerHTML+=&quot;&lt;br/&gt;我：&quot;+msg;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function reset()&#123;</span><br><span class="line">    document.getElementById(&quot;content&quot;).value=&quot;&quot;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>服务器端</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">package action;</span><br><span class="line"></span><br><span class="line">import java.io.IOException;</span><br><span class="line"></span><br><span class="line">import javax.websocket.CloseReason;</span><br><span class="line">import javax.websocket.OnClose;</span><br><span class="line">import javax.websocket.OnError;</span><br><span class="line">import javax.websocket.OnMessage;</span><br><span class="line">import javax.websocket.OnOpen;</span><br><span class="line">import javax.websocket.Session;</span><br><span class="line">import javax.websocket.server.PathParam;</span><br><span class="line">import javax.websocket.server.ServerEndpoint;</span><br><span class="line"></span><br><span class="line">//@ServerEndpoint注解中的内容是用户客户端websocket的连接url,例如ws://127.0.0.1:80/websocket/ws,</span><br><span class="line">//结构形式为“ws：//ip:端口/项目名/指定的url”</span><br><span class="line">@ServerEndpoint(&quot;/ws&quot;)</span><br><span class="line">public class WSServer &#123;</span><br><span class="line">    private Session session;</span><br><span class="line">    //连接打开时执行</span><br><span class="line">    @OnOpen</span><br><span class="line">    public void onOpen(Session session) &#123;</span><br><span class="line">    this.session=session;</span><br><span class="line">        System.out.println(&quot;一个客户端连接进来了 ... 它的sessionid是：&quot; + session.getId());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    //收到消息时执行</span><br><span class="line">    @OnMessage</span><br><span class="line">    public void onMessage(String message, Session session) &#123;</span><br><span class="line">    System.out.println(session.getId()+&quot;客户端发送的消息是：&quot;+message);</span><br><span class="line">        try&#123;</span><br><span class="line">        this.sendMessage(message);//消息发回给客户端</span><br><span class="line">        &#125;catch(Exception e)&#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        //return currentUser + &quot;：&quot; + message;如果有返回值，则客户端发送消息后会收到这个返回值</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    //连接关闭时执行</span><br><span class="line">    @OnClose</span><br><span class="line">    public void onClose(Session session, CloseReason closeReason) &#123;</span><br><span class="line">        System.out.println(&quot;一个客户端关闭了，它的sessionid是：&quot; + session.getId());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    //连接错误时执行</span><br><span class="line">    @OnError</span><br><span class="line">    public void onError(Throwable t) &#123;</span><br><span class="line">        t.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">    //自定义的方法，用于发送消息</span><br><span class="line">    public void sendMessage(String message) throws IOException&#123;</span><br><span class="line">    this.session.getBasicRemote().sendText(message);</span><br><span class="line">        //this.session.getAsyncRemote().sendText(message);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> javaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> webSocket </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>用CSS代码让你的列表网页提升渲染性能</title>
      <link href="/hb-myblog.github.io/2021/10/03/%E7%94%A8CSS%E4%BB%A3%E7%A0%81%E8%AE%A9%E4%BD%A0%E7%9A%84%E5%88%97%E8%A1%A8%E7%BD%91%E9%A1%B5%E6%8F%90%E5%8D%87%E6%B8%B2%E6%9F%93%E6%80%A7%E8%83%BD/"/>
      <url>/hb-myblog.github.io/2021/10/03/%E7%94%A8CSS%E4%BB%A3%E7%A0%81%E8%AE%A9%E4%BD%A0%E7%9A%84%E5%88%97%E8%A1%A8%E7%BD%91%E9%A1%B5%E6%8F%90%E5%8D%87%E6%B8%B2%E6%9F%93%E6%80%A7%E8%83%BD/</url>
      
        <content type="html"><![CDATA[<p>&emsp;&emsp;在长列表网页，DOM元素较多的情况下，我们会经常采用虚拟滚动、分页、上拉加载更多等不同的方式来进行优化，需要写大量的js或者css逻辑去实现。现在，我们多了一种方式——content-visibility。只需要一行CSS代码，就可以实现可见网页只加载可见区域内容。</p><h5 id="content-visibility属性有三个可选值"><a href="#content-visibility属性有三个可选值" class="headerlink" title="content-visibility属性有三个可选值:"></a>content-visibility属性有三个可选值:</h5><ul><li>visible: 默认值。对布局和呈现不会产生什么影响。</li><li>hidden: 元素跳过其内容的呈现。用户代理功能（例如，在页面中查找，按Tab键顺序导航等）不可访问已跳过的内容，也不能选择或聚焦。类似于对其内容设置了display: none属性。</li><li>auto: 对于用户可见区域的元素，浏览器会正常渲染其内容；对于不可见区域的元素，浏览器会暂时跳过其内容的呈现，等到其处于用户可见区域时，浏览器在渲染其内容。</li></ul><h5 id="代码："><a href="#代码：" class="headerlink" title="代码："></a>代码：</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;div class=&quot;card&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;div class=&quot;card&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;!-- ... --&gt;</span><br><span class="line">&lt;!-- 此处省略n个&lt;div class=&quot;card&quot;&gt;&lt;/div&gt; --&gt;</span><br><span class="line">&lt;!-- ... --&gt;</span><br><span class="line">&lt;div class=&quot;card&quot;&gt;&lt;/div&gt;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">.card &#123;</span><br><span class="line">   position: relative;</span><br><span class="line">   overflow: hidden;</span><br><span class="line">   transition-duration: 0.3s;</span><br><span class="line">   margin-bottom: 10px;</span><br><span class="line">   width: 200px;</span><br><span class="line">   height: 100px;</span><br><span class="line">   background-color: #ffaa00;</span><br><span class="line">   content-visibility: auto;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><h5 id="问题："><a href="#问题：" class="headerlink" title="问题："></a>问题：</h5><p>&emsp;&emsp;当元素的部分内容如img标签这种，元素的高度是有图片内容决定的，因此在这种情况下，如果使用content-visibility，则可见视图外的img初始未渲染，高度为0，随着滚动条向下滑动，页面高度增加，会导致滚动条的滚动有问题</p><h5 id="解决方法："><a href="#解决方法：" class="headerlink" title="解决方法："></a>解决方法：</h5><p>​&emsp;&emsp;如果在已知元素高度的情况下，可以使用contains-intrinsic-size属性，为上面的card添加：contains-intrinsic-size：312px;，这会给内容附一个初始高度值。（如果高度不固定也可以附一个大致的初始高度值，会使滚动条问题相对减少）。</p><h5 id="总结："><a href="#总结：" class="headerlink" title="总结："></a>总结：</h5><p>&emsp;&emsp;content-visibility是一个非常实用的CSS属性，虽然其兼容性现在不是很好，但是相信不久的将来这并不是问题。现在来看是部分场景下它对浏览器的滚动条影响问题，如果你的列表项高度相同，那么可以通过contain-intrinsic-size来设置一个初始高度解决。如果列表项高度不固定而又非常重视用户的滚动条体验，那么不建议使用此属性。</p>]]></content>
      
      
      <categories>
          
          <category> css </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>常用的表单验证</title>
      <link href="/hb-myblog.github.io/2021/10/02/%E5%B8%B8%E7%94%A8%E7%9A%84%E8%A1%A8%E5%8D%95%E9%AA%8C%E8%AF%81/"/>
      <url>/hb-myblog.github.io/2021/10/02/%E5%B8%B8%E7%94%A8%E7%9A%84%E8%A1%A8%E5%8D%95%E9%AA%8C%E8%AF%81/</url>
      
        <content type="html"><![CDATA[<h5 id="1、判断字符串是否是-https-mailto-tal-开头的"><a href="#1、判断字符串是否是-https-mailto-tal-开头的" class="headerlink" title="1、判断字符串是否是 https?:|mailto:|tal:  开头的"></a>1、判断字符串是否是 https?:|mailto:|tal:  开头的</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">export function isExternal(path) &#123;</span><br><span class="line">  return /^(https?:|mailto:|tel:)/.test(path)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="2、检验字符串是否是-admin-editor"><a href="#2、检验字符串是否是-admin-editor" class="headerlink" title="2、检验字符串是否是 admin  editor"></a>2、检验字符串是否是 admin  editor</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">export function validUsername(str) &#123;</span><br><span class="line">  const valid_map = [&#x27;admin&#x27;, &#x27;editor&#x27;]</span><br><span class="line">  return valid_map.indexOf(str.trim()) &gt;= 0</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="3、判断网址"><a href="#3、判断网址" class="headerlink" title="3、判断网址"></a>3、判断网址</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">export function validURL(url) &#123;</span><br><span class="line">  const reg = /^(http?|https?|ftp):\/\/([a-zA-Z0-9.-]+(:[a-zA-Z0-9.&amp;%$-]+)*@)*((25[0-5]|2[0-4][0-9]|1[0-9]&#123;2&#125;|[1-9][0-9]?)(\.(25[0-5]|2[0-4][0-9]|1[0-9]&#123;2&#125;|[1-9]?[0-9]))&#123;3&#125;|([a-zA-Z0-9-]+\.)*[a-zA-Z0-9-]+\.(com|edu|gov|int|mil|net|org|biz|arpa|info|name|pro|aero|coop|museum|[a-zA-Z]&#123;2&#125;))(:[0-9]+)*(\/($|[a-zA-Z0-9.,?&#x27;\\+&amp;%$#=~_-]+))*$/</span><br><span class="line">  return reg.test(url)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="4、判断都是小写字母"><a href="#4、判断都是小写字母" class="headerlink" title="4、判断都是小写字母"></a>4、判断都是小写字母</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">export function validLowerCase(str) &#123;</span><br><span class="line">  const reg = /^[a-z]+$/</span><br><span class="line">  return reg.test(str)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="5、判断都是大写字母"><a href="#5、判断都是大写字母" class="headerlink" title="5、判断都是大写字母"></a>5、判断都是大写字母</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">export function validUpperCase(str) &#123;</span><br><span class="line">  const reg = /^[A-Z]+$/</span><br><span class="line">  return reg.test(str)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="6、判断是只能是数字和字母"><a href="#6、判断是只能是数字和字母" class="headerlink" title="6、判断是只能是数字和字母"></a>6、判断是只能是数字和字母</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">export function validAlphabets(str) &#123;</span><br><span class="line">  const reg = /^[0-9A-Za-z]+$/</span><br><span class="line">  return reg.test(str)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="7、用户密码格式"><a href="#7、用户密码格式" class="headerlink" title="7、用户密码格式"></a>7、用户密码格式</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">export function isEvolPass(str) &#123;</span><br><span class="line">  return /^(?=.*[0-9])(?=.*[a-zA-Z]).&#123;8,30&#125;$/.test(str) // 用户密码格式正则</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="8、邮箱校验"><a href="#8、邮箱校验" class="headerlink" title="8、邮箱校验"></a>8、邮箱校验</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">export function isEmail(email) &#123;</span><br><span class="line">  const reg = /^(([^&lt;&gt;()\[\]\\.,;:\s@&quot;]+(\.[^&lt;&gt;()\[\]\\.,;:\s@&quot;]+)*)|(&quot;.+&quot;))@((\[[0-9]&#123;1,3&#125;\.[0-9]&#123;1,3&#125;\.[0-9]&#123;1,3&#125;\.[0-9]&#123;1,3&#125;\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]&#123;2,&#125;))$/</span><br><span class="line">  return reg.test(email)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="9、验证字符串"><a href="#9、验证字符串" class="headerlink" title="9、验证字符串"></a>9、验证字符串</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">export function isString(str) &#123;</span><br><span class="line">  if (typeof str === &#x27;string&#x27; || str instanceof String) &#123;</span><br><span class="line">    return true</span><br><span class="line">  &#125;</span><br><span class="line">  return false</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="10、手机号码校验"><a href="#10、手机号码校验" class="headerlink" title="10、手机号码校验"></a>10、手机号码校验</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">export function isPhone(str) &#123;</span><br><span class="line">  return /^(13[0-9]|14[579]|15[0-3,5-9]|16[6]|17[0135678]|18[0-9]|19[0-9])\d&#123;8&#125;$/.test(str) //  手机号码正则</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="11、验证是数组"><a href="#11、验证是数组" class="headerlink" title="11、验证是数组"></a>11、验证是数组</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">export function isArray(arg) &#123;</span><br><span class="line">  if (typeof Array.isArray === &#x27;undefined&#x27;) &#123;</span><br><span class="line">    return Object.prototype.toString.call(arg) === &#x27;[object Array]&#x27;</span><br><span class="line">  &#125;</span><br><span class="line">  return Array.isArray(arg)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="12、判断只能是汉字"><a href="#12、判断只能是汉字" class="headerlink" title="12、判断只能是汉字"></a>12、判断只能是汉字</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">export function isChinese(str)&#123;</span><br><span class="line">const reg=/^[\u0391-\uFFE5]+$/;</span><br><span class="line">    return reg.test(str)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="13、校验时间大小"><a href="#13、校验时间大小" class="headerlink" title="13、校验时间大小"></a>13、校验时间大小</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">export function checkDate(obj)&#123;</span><br><span class="line">    const obj_value=obj.replace(/-/g,&quot;/&quot;);//替换字符，变成标准格式(检验格式为：&#x27;2009-12-10&#x27;)</span><br><span class="line">    // var obj_value=obj.replace(&quot;-&quot;,&quot;/&quot;);//替换字符，变成标准格式(检验格式为：&#x27;2010-12-10 11:12&#x27;)</span><br><span class="line">    const date1=new Date(Date.parse(obj_value));</span><br><span class="line">    const date2=new Date();//取今天的日期</span><br><span class="line">    if(date1&gt;date2)&#123;</span><br><span class="line">    return false; //不能大于当前时间</span><br><span class="line">    &#125;</span><br><span class="line">    return true</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="14、判断ip"><a href="#14、判断ip" class="headerlink" title="14、判断ip"></a>14、判断ip</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">export function isIP(strIP) &#123;</span><br><span class="line">    if (isNull(strIP)) return false;</span><br><span class="line">    const re=/^(\d+)\.(\d+)\.(\d+)\.(\d+)$/g //匹配IP地址的正则表达式</span><br><span class="line">    if(re.test(strIP))&#123;</span><br><span class="line">    if( RegExp.$1 &lt;256 &amp;&amp; RegExp.$2&lt;256 &amp;&amp; RegExp.$3&lt;256 &amp;&amp; RegExp.$4&lt;256) return true;</span><br><span class="line">    &#125;</span><br><span class="line">return false;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="15、检查输入字符串是否为空或者全部都是空格"><a href="#15、检查输入字符串是否为空或者全部都是空格" class="headerlink" title="15、检查输入字符串是否为空或者全部都是空格"></a>15、检查输入字符串是否为空或者全部都是空格</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">export function isNull( str )&#123;</span><br><span class="line">    if ( str == &quot;&quot; ) return true;</span><br><span class="line">    const regu = &quot;^[ ]+$&quot;;</span><br><span class="line">    var const = new RegExp(regu);</span><br><span class="line">    return re.test(str);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="16、判断是否是日期-输入：date：日期；fmt：日期格式"><a href="#16、判断是否是日期-输入：date：日期；fmt：日期格式" class="headerlink" title="16、判断是否是日期  (输入：date：日期；fmt：日期格式)"></a>16、判断是否是日期  (输入：date：日期；fmt：日期格式)</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">export function isDate( date, fmt ) &#123;</span><br><span class="line">    if (fmt==null) fmt=&quot;yyyyMMdd&quot;;</span><br><span class="line">    const yIndex = fmt.indexOf(&quot;yyyy&quot;);</span><br><span class="line">    if(yIndex==-1) return false;</span><br><span class="line">    const year = date.substring(yIndex,yIndex+4);</span><br><span class="line">    const mIndex = fmt.indexOf(&quot;MM&quot;);</span><br><span class="line">    if(mIndex==-1) return false;</span><br><span class="line">    const month = date.substring(mIndex,mIndex+2);</span><br><span class="line">    const dIndex = fmt.indexOf(&quot;dd&quot;);</span><br><span class="line">    if(dIndex==-1) return false;</span><br><span class="line">    const day = date.substring(dIndex,dIndex+2);</span><br><span class="line">    if(!isNumber(year)||year&gt;&quot;2100&quot; || year&lt; &quot;1900&quot;) return false;</span><br><span class="line">    if(!isNumber(month)||month&gt;&quot;12&quot; || month&lt; &quot;01&quot;) return false;</span><br><span class="line">    if(day&gt;getMaxDay(year,month) || day&lt; &quot;01&quot;) return false;</span><br><span class="line">    return true;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="17、字符1是否以字符串2开始和结束"><a href="#17、字符1是否以字符串2开始和结束" class="headerlink" title="17、字符1是否以字符串2开始和结束"></a>17、字符1是否以字符串2开始和结束</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">function isFirstMatch(str1,str2)&#123;</span><br><span class="line">    const index = str1.indexOf(str2);</span><br><span class="line">    if(index==0) return true;</span><br><span class="line">    return false;</span><br><span class="line">&#125;</span><br><span class="line">export function isLastMatch(str1,str2)&#123;</span><br><span class="line">    const index = str1.lastIndexOf(str2);</span><br><span class="line">    if(str1.length==index+str2.length) return true;</span><br><span class="line">    return false;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> javaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 表单验证 </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
